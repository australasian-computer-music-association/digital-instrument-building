<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><!-- InstanceBegin template="/Templates/tutorial files.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<!-- InstanceBeginEditable name="doctitle" --> 
<title>Digital Instrument Building</title>
<!-- InstanceEndEditable --> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<META NAME="DC.Creator" CONTENT="PersonalName= Andrew R. Brown  ">
<META NAME="DC.Creator.Email" CONTENT="algorithmicmusic@gmail.com,">
<META NAME="DC.Rights" CONTENT="Andrew R. Brown ">
<META NAME="DC.Title" CONTENT="Digital Instrument Building - Music software development with jMusic">
<META NAME="DC.Title.Alternative" content ="Music software development with jMusic">
<META NAME="DC.Subject" CONTENT="music, java, composition, algorithmic, digital music, generative music, instrument building, music analysing software development, Australia">
<META NAME="DC.Description" CONTENT="This site is a tutorial resource designed to assist in the training and self education of up-and-coming digital instrument developers. The tutorials cover topics including music software design, audio synthesis, digital signal processing, compositional systems, and computer programming concepts. ">
<META NAME="DC.Language" SCHEME="rfc1766" CONTENT="en-au">
<META NAME="DC.Audience" CONTENT="All">
<META NAME="DC.Date.Created" CONTENT="06-04-2003">
<META NAME="DC.Availability" CONTENT="PersonalName= Andrew R. Brown; email= algorithmicmusic@gmail.com">
<!-- ImageReady Preload Script (menubanner2.psd) -->
<SCRIPT TYPE="text/javascript">
<!--

function newImage(arg) {
	if (document.images) {
		rslt = new Image();
		rslt.src = arg;
		return rslt;
	}
}

function changeImages() {
	if (document.images && (preloadFlag == true)) {
		for (var i=0; i<changeImages.arguments.length; i+=2) {
			document[changeImages.arguments[i]].src = changeImages.arguments[i+1];
		}
	}
}

var preloadFlag = false;
function preloadImages() {
	if (document.images) {
		Music_algorithms_over = newImage("images/Music-algorithms-over.jpg");
		Interfaces_over = newImage("images/Interfaces-over.jpg");
		Programming_over = newImage("images/Programming-over.jpg");
		Acoustics_over = newImage("images/Acoustics-over.jpg");
		context_over = newImage("images/context-over.jpg");
		audio_over = newImage("images/audio-over.jpg");
		MIDI_over = newImage("images/MIDI-over.jpg");
		preloadFlag = true;
	}
}

// -->
</SCRIPT>
<!-- End Preload Script -->
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}
//-->
</script>
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_reloadPage(init) {  //reloads the window if Nav4 resized
  if (init==true) with (navigator) {if ((appName=="Netscape")&&(parseInt(appVersion)==4)) {
    document.MM_pgW=innerWidth; document.MM_pgH=innerHeight; onresize=MM_reloadPage; }}
  else if (innerWidth!=document.MM_pgW || innerHeight!=document.MM_pgH) location.reload();
}
MM_reloadPage(true);

function MM_nbGroup(event, grpName) { //v6.0
  var i,img,nbArr,args=MM_nbGroup.arguments;
  if (event == "init" && args.length > 2) {
    if ((img = MM_findObj(args[2])) != null && !img.MM_init) {
      img.MM_init = true; img.MM_up = args[3]; img.MM_dn = img.src;
      if ((nbArr = document[grpName]) == null) nbArr = document[grpName] = new Array();
      nbArr[nbArr.length] = img;
      for (i=4; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
        if (!img.MM_up) img.MM_up = img.src;
        img.src = img.MM_dn = args[i+1];
        nbArr[nbArr.length] = img;
    } }
  } else if (event == "over") {
    document.MM_nbOver = nbArr = new Array();
    for (i=1; i < args.length-1; i+=3) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = (img.MM_dn && args[i+2]) ? args[i+2] : ((args[i+1])? args[i+1] : img.MM_up);
      nbArr[nbArr.length] = img;
    }
  } else if (event == "out" ) {
    for (i=0; i < document.MM_nbOver.length; i++) {
      img = document.MM_nbOver[i]; img.src = (img.MM_dn) ? img.MM_dn : img.MM_up; }
  } else if (event == "down") {
    nbArr = document[grpName];
    if (nbArr)
      for (i=0; i < nbArr.length; i++) { img=nbArr[i]; img.src = img.MM_up; img.MM_dn = 0; }
    document[grpName] = nbArr = new Array();
    for (i=2; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = img.MM_dn = (args[i+1])? args[i+1] : img.MM_up;
      nbArr[nbArr.length] = img;
  } }
}
//-->
</script>
<link href="../../style/main.css" rel="stylesheet" type="text/css">
<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->
</head>
<body leftmargin="3" topmargin="3" marginwidth="0" marginheight="0"  onLoad="MM_preloadImages('../../images/banner/audio-over.jpg','../../images/banner/MIDI-over.jpg','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Interfaces-over.jpg','../../images/banner/Programming-over.jpg','../../images/banner/Acoustics-over.jpg','../../images/banner/context-over.jpg','../../images/banner/banner_08.gif')">
<table width="691" border="0" align="center">
  <tr> 
    <td colspan="5" align="left"> <div align="center"> 
        <table border="0" align="left" cellpadding="0" cellspacing="0">
          <tr> 
            <td colspan="8"><img src="../../images/banner.jpg" alt="" width=758 height=57 border="0" usemap="#Map5"></td>
          </tr>
          <tr> 
            <td width="50"><a href="../../Audio/audio.htm" target="_top" onClick="MM_nbGroup('down','group1','Audio','../../images/banner/audio-over.jpg',1)" onMouseOver="MM_nbGroup('over','Audio','../../images/banner/audio-over.jpg','../../images/banner/audio-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/audio.jpg" alt="audio" name="Audio" width="50" height="24" border="0" onload=""></a></td>
            <td width="47"><a href="../../midi/midi.htm" target="_top" onClick="MM_nbGroup('down','group1','MIDI','../../images/banner/MIDI-over.jpg',1)" onMouseOver="MM_nbGroup('over','MIDI','../../images/banner/MIDI-over.jpg','../../images/banner/MIDI-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/MIDI.jpg" alt="MIDI" name="MIDI" width="47" height="24" border="0" onload=""></a></td>
            <td width="117"><a href="../../musalgo/musalgo.htm" target="_top" onClick="MM_nbGroup('down','group1','musalgorithms','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOver="MM_nbGroup('over','musalgorithms','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Music-algorithms.jpg" alt="Music Algorithms" name="musalgorithms" width="117" height="24" border="0" onload=""></a></td>
            <td width="88"><a href="../../interfaces/interface.htm" target="_top" onClick="MM_nbGroup('down','group1','Interfaces','../../images/banner/Interfaces-over.jpg',1)" onMouseOver="MM_nbGroup('over','Interfaces','../../images/banner/Interfaces-over.jpg','../../images/banner/Interfaces-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Interfaces.jpg" alt="Interfaces" name="Interfaces" width="88" height="24" border="0" onload=""></a></td>
            <td width="103"><a href="../../programming/programming.htm" target="_top" onClick="MM_nbGroup('down','group1','Programming','../../images/banner/Programming-over.jpg',1)" onMouseOver="MM_nbGroup('over','Programming','../../images/banner/Programming-over.jpg','../../images/banner/Programming-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Programming.jpg" alt="Programming" name="Programming" width="103" height="24" border="0" onload=""></a></td>
            <td width="81"><a href="../../acoustics/acoustics.htm" target="_top" onClick="MM_nbGroup('down','group1','Acoustics','../../images/banner/Acoustics-over.jpg',1)" onMouseOver="MM_nbGroup('over','Acoustics','../../images/banner/Acoustics-over.jpg','../../images/banner/Acoustics-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Acoustics.jpg" alt="Acoustics" name="Acoustics" width="81" height="24" border="0" onload=""></a></td>
            <td width="100"><a href="../../context/context.htm" target="_top" onClick="MM_nbGroup('down','group1','Context','../../images/banner/context-over.jpg',1)" onMouseOver="MM_nbGroup('over','Context','../../images/banner/context-over.jpg','../../images/banner/context-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/context.jpg" alt="Context" name="Context" width="100" height="24" border="0" onload=""></a></td>
            <td width="156"><img src="../../images/banner/banner_09.gif" width="172" height="24"></td>
          </tr>
        </table>
      </div></td>
  </tr>
  <tr> 
    <td width="3" align="left"> <div align="right"></div>
      <div align="right"></div>
      <div align="right"></div></td>
    <!-- InstanceBeginEditable name="tracker" --> 
    <td height="16" colspan="2" rowspan="2" align="left"><a href="../../musalgo/musalgo.htm">&gt; 
      Music Algorithms </a>&gt; <a href="../../musalgo/generate.htm">Generating</a> 
      &gt;<a href="RandomRhythmDemo.html"> </a> <a href="MuchChaos.html">Chaotic 
      Counterpoint </a></td>
    <!-- InstanceEndEditable -->
    <td width="15" rowspan="2" align="left">&nbsp;</td>
    <td width="214" rowspan="2" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="3" rowspan="3" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="66" align="left" valign="top">&nbsp;</td>
    <td width="444" align="left" valign="top">&nbsp;</td>
    <td colspan="2" align="left" valign="top"><strong></strong></td>
  </tr>
  <tr> <!-- InstanceBeginEditable name="content" --> 
    <td colspan="4" rowspan="3" align="left" valign="top"> 
     
          <h2>Chaotic Counterpoint </h2>
      
     
      <p>This demo produces a two part chaotic counterpoint.<br>
        The initially small changes in starting value gradually bifurcate (go 
        their own ways) and become a feature of the piece.<br>
        The two parts start together and stay within a few semitones of each other 
        for a while then separate such that from about halfway through little 
        connection between the two is evident - they become chaotic : )</p>
      <p>If you have music notation software which will 
        show parts on the same stave in different colours, then try importing 
        the MIDI file from this class and visually see the increasing bifurcation.</p>
      <p>For an overview of chaotic systems and their 
        musical uses read The Computer Music Tutorial (Roads 1996) from p.886. 
        Also read Computer Music (Dodge &amp; Jerse 1997) from p.371.</p>
      <p><a
 href="../jmdemos/MuchChaos.java" target="_top">Click here to view source.</a></p>
      <p>To hear the result play the MIDI file below.</p>
      <p> 
        <embed src="soundExamples/MuchChaos.mid"
 pluginspage="http://quicktime.apple.com" width="150" height="60"
 controller="TRUE" loop="FALSE" autoplay="FALSE"></embed></p>
      <p>Let's have a closer look.  
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>import jm.JMC;<br>import jm.music.data.*;<br>import jm.util.*;</pre> </td>
          </tr>
        </tbody>
      </table>
       
      <br>
      <br>
      Lines 1-4 import useful packages that we need to use in the program. <br>
      The first import statement gets a standard Java class used for error messages.<br>
      The rest of the statements import the jMusic classes (take another look 
      at the package documentation to work out what gets imported from where by 
      looking <a
 href="http://explodingart.com/jmusic/jmDocumentation/index.html" target="_blank">here</a>). 
      <p></p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>public final class muchChaos implements JMC{<br>	public static void main(String[] args){<br>		Score score = new Score("JMDemo - Chaos");<br>		Part inst = new Part("Guitar", NYLON_GUITAR, 0);<br>	        Part inst2 = new Part("Piano", PIANO, 1);<br>		Phrase phr = new Phrase(0.0);<br>		Phrase phr2 = new Phrase(0.0);<br>		double xold = 0.0; <span
 class = "comment">// initial x position</span>
		double x, y; <span
 class = "comment">// temp variables</span>
		double yold = 0.0; <span
 class = "comment">// initial y position </span></pre> </td>
          </tr>
        </tbody>
      </table>
      <br>
      All the work is done in the main method which starts here<br>
      . This section of the method sets up the attributes to be used. <br>
      First are the usual suspects of Score, Part, and Phrase.<br>
      There are two phrases (of course) - one for each line. <br>
      Then a number of variables which will be used by the fractal algorithm are 
      set up.<br>
      XOLD is the past x value, and YOLD is the past y value, which are later 
      given starting values.<br>
      The details of the algorithm will not be discussed here - refer to the references 
      above (or others) for details on the math. 
      <p></p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>	double a = 1.4;<br>	double b = 0.3;<br>	 <br>	for(int i=0;i&lt;48;i++){<br>		x = 1 + yold - a * xold * xold;<br>		y = b * xold;<br>&nbsp;<br>		Note note = new Note((int)(x*36)+48, Q);<br>		phr.addNote(note);<br>		xold = x;<br>		yold = y;<br>	}</pre> 
            </td>
          </tr>
        </tbody>
      </table>
      <br>
      The initial values for the system are set with these two lines. <br>
      Some initial values will result in oscillating (repeating) output while 
      others result in never-ending change.<br>
      These values are of the latter sort (they come from the Dodge and Jerse 
      book, Computer Music). 
      <p></p>
      <p>As you can see above the maths for chaos theory 
        is really quite straight forward - especially compared to Fractal theory. 
        Just two lines. The x value only is used in the output and is mapped to 
        pitch, each note is a quaver [eighth note] in length. Notice that because 
        the math calculates in floating point numbers the result is cast (converted) 
        to an integer - this is what the '(int)' does. The value is multiplied 
        by 36 then has 48 added to it to bring it into a 'reasonable' range for 
        MIDI notes from the C below middle C up three octaves. After the note 
        is created and added to the phrase the values of x and y are stored as 
        previous values and the loop continues until 48 notes are created.</p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>         a = 1.401;<br>		b = 0.3;<br>		xold = 0.0;<br>		yold = 0.0;<br>		<span
 class = "comment">
		// create a phrase of chaotically pitched quavers <br>		// over a limited MIDI range.</span>
		for(short i=0;i&lt;100;i++){
			x = 1 + yold - a * xold * xold;
			y = b * xold;<span
 class = "comment">
			// map the x value across a few octaves</span>
			Note note = new Note((int)((x*24)+48), C);
			phr2.addNote(note);
			xold = x;
			yold = y;
		}</pre> </td>
          </tr>
        </tbody>
      </table>
      <p></p>
      <p>This code is exactly the same as the previous 
        section except that the starting value for x (a) is 0.001 greater, and 
        notes are added to phrase 2.</p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>		inst.addPhrase(phr);<br>        	inst2.addPhrase(phr2);<br>		<span
 class = "comment">
		// add the part that to a score</span>
		score.addPart(inst);
         	score.addPart(inst2);
		<span
 class = "comment">
		// create a MIDI file of the score</span>
		Write.midi(score, "chaos.mid");
	}
}	 </pre> </td>
          </tr>
        </tbody>
      </table>
      <p></p>
      <p>The phrases are added to a part which is added 
        to the score. Then the score is converted to a standard MIDI file (SMF) 
        and written to disk with the name 'chaos.mid'. 

      </td>
    <!-- InstanceEndEditable --></tr>
  <tr> 
    <td align="left"> <div align="left"></div></td>
  </tr>
  <tr> 
    <td align="left">&nbsp;</td>
  </tr>
</table>
<blockquote> 
  <p name="Map"> 
    <map name="Map">
      <area shape="rect" coords="4,4,41,29" href="http://jmusic.ci.qut.edu" target="_blank" alt="jMusic">
      <area shape="rect" coords="43,5,80,31" href="http://www.ozco.gov.au" target="_blank" alt="Australia Council">
      <area shape="rect" coords="83,4,108,29" href="http://www.qut.com" target="_blank" alt="Queensland University of Technology">
    </map>
    <map name="Map2">
      <area shape="rect" coords="702,1,758,12" href="../../extras/sitemap.html" target="_self" alt="Sitemap">
      <area shape="rect" coords="629,1,687,12" href="../../extras/contact.html" target="_self" alt="Contact">
      <area shape="rect" coords="574,1,615,14" href="../../index.html" target="_self" alt="Home">
    </map>
    <map name="Map3">
      <area shape="rect" coords="553,5,601,18" href="#" alt="Home">
      <area shape="rect" coords="612,4,671,18" href="#">
      <area shape="rect" coords="683,3,735,19" href="#">
      <area shape="rect" coords="9,8,227,59" href="#" target="index.html">
    </map>
    <map name="Map4">
      <area shape="rect" coords="6,9,40,41" href="http://www.qut.com" target="_blank" alt="http://www.qut.com">
      <area shape="rect" coords="44,14,87,42" href="http://explodingart.com/jmusic" target="_blank" alt="http://explodingart.com/jmusic">
      <area shape="rect" coords="90,9,138,43" href="http://www.ozco.gov.au" target="_parent" alt="http://www.ozco.gov.au">
      <area shape="rect" coords="313,13,512,36" href="../../contact.html">
    </map>
  </p>
</blockquote>
<map name="Map5">
  <area shape="rect" coords="-7,4,228,51" href="../../index.htm" target="_self" alt="Digital Instrument making">
  <area shape="rect" coords="599,1,658,18" href="../../index.htm" alt="Home">
  <area shape="rect" coords="677,3,755,18" href="../../extras/contact.htm" target="extras">
</map>
</body>
<!-- InstanceEnd --></html>
