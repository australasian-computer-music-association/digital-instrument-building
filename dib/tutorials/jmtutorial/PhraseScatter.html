<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><!-- InstanceBegin template="/Templates/tutorial files.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<!-- InstanceBeginEditable name="doctitle" -->
<title>Digital Instrument Building</title>
<!-- InstanceEndEditable --> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<META NAME="DC.Creator" CONTENT="PersonalName= Andrew R. Brown  ">
<META NAME="DC.Creator.Email" CONTENT="algorithmicmusic@gmail.com,">
<META NAME="DC.Rights" CONTENT="Andrew R. Brown ">
<META NAME="DC.Title" CONTENT="Digital Instrument Building - Music software development with jMusic">
<META NAME="DC.Title.Alternative" content ="Music software development with jMusic">
<META NAME="DC.Subject" CONTENT="music, java, composition, algorithmic, digital music, generative music, instrument building, music analysing software development, Australia">
<META NAME="DC.Description" CONTENT="This site is a tutorial resource designed to assist in the training and self education of up-and-coming digital instrument developers. The tutorials cover topics including music software design, audio synthesis, digital signal processing, compositional systems, and computer programming concepts. ">
<META NAME="DC.Language" SCHEME="rfc1766" CONTENT="en-au">
<META NAME="DC.Audience" CONTENT="All">
<META NAME="DC.Date.Created" CONTENT="06-04-2003">
<META NAME="DC.Availability" CONTENT="PersonalName= Andrew R. Brown; email= algorithmicmusic@gmail.com">
<!-- ImageReady Preload Script (menubanner2.psd) -->
<SCRIPT TYPE="text/javascript">
<!--

function newImage(arg) {
	if (document.images) {
		rslt = new Image();
		rslt.src = arg;
		return rslt;
	}
}

function changeImages() {
	if (document.images && (preloadFlag == true)) {
		for (var i=0; i<changeImages.arguments.length; i+=2) {
			document[changeImages.arguments[i]].src = changeImages.arguments[i+1];
		}
	}
}

var preloadFlag = false;
function preloadImages() {
	if (document.images) {
		Music_algorithms_over = newImage("images/Music-algorithms-over.jpg");
		Interfaces_over = newImage("images/Interfaces-over.jpg");
		Programming_over = newImage("images/Programming-over.jpg");
		Acoustics_over = newImage("images/Acoustics-over.jpg");
		context_over = newImage("images/context-over.jpg");
		audio_over = newImage("images/audio-over.jpg");
		MIDI_over = newImage("images/MIDI-over.jpg");
		preloadFlag = true;
	}
}

// -->
</SCRIPT>
<!-- End Preload Script -->
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}
//-->
</script>
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_reloadPage(init) {  //reloads the window if Nav4 resized
  if (init==true) with (navigator) {if ((appName=="Netscape")&&(parseInt(appVersion)==4)) {
    document.MM_pgW=innerWidth; document.MM_pgH=innerHeight; onresize=MM_reloadPage; }}
  else if (innerWidth!=document.MM_pgW || innerHeight!=document.MM_pgH) location.reload();
}
MM_reloadPage(true);

function MM_nbGroup(event, grpName) { //v6.0
  var i,img,nbArr,args=MM_nbGroup.arguments;
  if (event == "init" && args.length > 2) {
    if ((img = MM_findObj(args[2])) != null && !img.MM_init) {
      img.MM_init = true; img.MM_up = args[3]; img.MM_dn = img.src;
      if ((nbArr = document[grpName]) == null) nbArr = document[grpName] = new Array();
      nbArr[nbArr.length] = img;
      for (i=4; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
        if (!img.MM_up) img.MM_up = img.src;
        img.src = img.MM_dn = args[i+1];
        nbArr[nbArr.length] = img;
    } }
  } else if (event == "over") {
    document.MM_nbOver = nbArr = new Array();
    for (i=1; i < args.length-1; i+=3) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = (img.MM_dn && args[i+2]) ? args[i+2] : ((args[i+1])? args[i+1] : img.MM_up);
      nbArr[nbArr.length] = img;
    }
  } else if (event == "out" ) {
    for (i=0; i < document.MM_nbOver.length; i++) {
      img = document.MM_nbOver[i]; img.src = (img.MM_dn) ? img.MM_dn : img.MM_up; }
  } else if (event == "down") {
    nbArr = document[grpName];
    if (nbArr)
      for (i=0; i < nbArr.length; i++) { img=nbArr[i]; img.src = img.MM_up; img.MM_dn = 0; }
    document[grpName] = nbArr = new Array();
    for (i=2; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = img.MM_dn = (args[i+1])? args[i+1] : img.MM_up;
      nbArr[nbArr.length] = img;
  } }
}
//-->
</script>
<link href="../../style/main.css" rel="stylesheet" type="text/css">
<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->
</head>
<body leftmargin="3" topmargin="3" marginwidth="0" marginheight="0"  onLoad="MM_preloadImages('../../images/banner/audio-over.jpg','../../images/banner/MIDI-over.jpg','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Interfaces-over.jpg','../../images/banner/Programming-over.jpg','../../images/banner/Acoustics-over.jpg','../../images/banner/context-over.jpg','../../images/banner/banner_08.gif')">
<table width="691" border="0" align="center">
  <tr> 
    <td colspan="5" align="left"> <div align="center"> 
        <table border="0" align="left" cellpadding="0" cellspacing="0">
          <tr> 
            <td colspan="8"><img src="../../images/banner.jpg" alt="" width=758 height=57 border="0" usemap="#Map5"></td>
          </tr>
          <tr> 
            <td width="50"><a href="../../Audio/audio.htm" target="_top" onClick="MM_nbGroup('down','group1','Audio','../../images/banner/audio-over.jpg',1)" onMouseOver="MM_nbGroup('over','Audio','../../images/banner/audio-over.jpg','../../images/banner/audio-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/audio.jpg" alt="audio" name="Audio" width="50" height="24" border="0" onload=""></a></td>
            <td width="47"><a href="../../midi/midi.htm" target="_top" onClick="MM_nbGroup('down','group1','MIDI','../../images/banner/MIDI-over.jpg',1)" onMouseOver="MM_nbGroup('over','MIDI','../../images/banner/MIDI-over.jpg','../../images/banner/MIDI-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/MIDI.jpg" alt="MIDI" name="MIDI" width="47" height="24" border="0" onload=""></a></td>
            <td width="117"><a href="../../musalgo/musalgo.htm" target="_top" onClick="MM_nbGroup('down','group1','musalgorithms','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOver="MM_nbGroup('over','musalgorithms','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Music-algorithms.jpg" alt="Music Algorithms" name="musalgorithms" width="117" height="24" border="0" onload=""></a></td>
            <td width="88"><a href="../../interfaces/interface.htm" target="_top" onClick="MM_nbGroup('down','group1','Interfaces','../../images/banner/Interfaces-over.jpg',1)" onMouseOver="MM_nbGroup('over','Interfaces','../../images/banner/Interfaces-over.jpg','../../images/banner/Interfaces-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Interfaces.jpg" alt="Interfaces" name="Interfaces" width="88" height="24" border="0" onload=""></a></td>
            <td width="103"><a href="../../programming/programming.htm" target="_top" onClick="MM_nbGroup('down','group1','Programming','../../images/banner/Programming-over.jpg',1)" onMouseOver="MM_nbGroup('over','Programming','../../images/banner/Programming-over.jpg','../../images/banner/Programming-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Programming.jpg" alt="Programming" name="Programming" width="103" height="24" border="0" onload=""></a></td>
            <td width="81"><a href="../../acoustics/acoustics.htm" target="_top" onClick="MM_nbGroup('down','group1','Acoustics','../../images/banner/Acoustics-over.jpg',1)" onMouseOver="MM_nbGroup('over','Acoustics','../../images/banner/Acoustics-over.jpg','../../images/banner/Acoustics-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Acoustics.jpg" alt="Acoustics" name="Acoustics" width="81" height="24" border="0" onload=""></a></td>
            <td width="100"><a href="../../context/context.htm" target="_top" onClick="MM_nbGroup('down','group1','Context','../../images/banner/context-over.jpg',1)" onMouseOver="MM_nbGroup('over','Context','../../images/banner/context-over.jpg','../../images/banner/context-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/context.jpg" alt="Context" name="Context" width="100" height="24" border="0" onload=""></a></td>
            <td width="156"><img src="../../images/banner/banner_09.gif" width="172" height="24"></td>
          </tr>
        </table>
      </div></td>
  </tr>
  <tr> 
    <td width="3" align="left"> <div align="right"></div>
      <div align="right"></div>
      <div align="right"></div></td>
    <!-- InstanceBeginEditable name="tracker" -->
    <td height="16" colspan="2" rowspan="2" align="left"><a href="../../musalgo/musalgo.htm">&gt; 
      Music Algorithms </a>&gt; <a href="../../musalgo/modify.htm">Modifying</a> 
      &gt;<a href="PhraseScatter.html"> Scatter Phrases</a></td>
    <!-- InstanceEndEditable -->
    <td width="15" rowspan="2" align="left">&nbsp;</td>
    <td width="214" rowspan="2" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="3" rowspan="3" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="66" align="left" valign="top">&nbsp;</td>
    <td width="444" align="left" valign="top">&nbsp;</td>
    <td colspan="2" align="left" valign="top"><strong></strong></td>
  </tr>
  <tr> <!-- InstanceBeginEditable name="content" --> 
    <td colspan="4" rowspan="3" align="left" valign="top"> <h2 >Scatter 
        Phrases: Stochastic phrase positions</h2>
      <p>This tutorial creates phrases across 16 channels and sets their start 
        positions at random over 100 beats.<br>
        Being stochastic (random) for both note pitch and phrase position means 
        that every time this program is run the results are quite unique. <br>
        There are moments in the pieces where the texture is quite thick and the 
        mood intense and other moments where the texture is sparse and the mood 
        delicate.</p>
      <p><a href="soundExamples/TestMIDI.mid">Click here to hear the output from 
        the Scatter class.</a><br>
      </p>
      <p>Below is the source code for the last example.</p>
      <p><a class="c4" href="../jmdemos/Scatter.java" target="_top">Click here 
        to view source.</a></p>
      <p>Lets have a closer look.</p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>import jm.JMC;<br>import jm.util.*;<br>import jm.music.data.*;<br>import jm.music.tools.*;<span
 class="comment"><br><br>/**<br>* This class scatters phrases over 100 beats or so.<br>* @ author Andrew R. Brown<br>*/</span><br><br>public final class Scatter implements JMC{<span
 class="comment"><br> 	/**<br>	  * The main method, where all good Java programs start<br>	 */</span><br> 	public static void main(String[] args){<br> 		Score s = new Score();<span
 class="comment"><br>        	// loop through 16 parts<br>        	// incrementing the instrument and channel each time</span><br>        	for(int i=0; i&lt;16;i++) {<br>        		Part p = new Part("part",i,i);<span
 class="comment"><br>        		// create a couple of phrases in each part</span><br>        	     	for(int j=0; j&lt;2;j++) {<br>        	        	Phrase phrase = new Phrase();<br>        	              	<span
 class="comment">// Use the makePhrase method (below)</span><br>        	        	phrase = makePhrase();<br>        	             	p.addPhrase(phrase);<br>        	        }<br>        	        s.addPart(p);<br>		}       <span
 class="comment"><br>        	// provide some rhythmic structure by<br>        	// accenting particular beats</span><br>        	double[] accentArray = {0.0, 1.0, 1.5, 1.75, 3.0};<br>        	Mod.accents(s, 4.0, accentArray);<br>        	View.show(s);<br>        	Write.midi(s, "TestMIDI.mid"); <br>	}<span
 class="comment"><br> 	/**<br> 	* This method generates a phrase based on a  random walk <br>	*/</span><br> 	private static Phrase makePhrase() {<br>        	Phrase phr = new Phrase((Math.random()*400) * SQ);<br>        	int pitch = (int)(Math.random()*60+30);<br>     		for(int i=0;i&lt;50;i++) {<br>               <br>		<span
 class="comment">	//randomly shift the pitch<br></span>               		pitch += (int)(Math.random()*10-5);<br>               <br>	<span
 class="comment">		// if the pitch walks out of the bounds, put it back to 60</span><br>                	if(pitch &lt;6 || pitch &gt; 94) pitch = 60;<br>               <br>                <span
 class="comment">	//make the note, with random velocity to make it interesting<br></span>                	Note n = new Note(pitch, SQ, (int)(Math.random()*70<br>                                  + 30));<br>            <br>		<span
 class="comment">	//add note to phrase<br></span>                	phr.addNote(n);<br>            	}<br>        	return phr;<br> 	}<br>}<br>            </pre> </td>
          </tr>
        </tbody>
      </table>
      <span class="c7">A brief explanation of the code is that it creates 16 parts, 
      in each part there are two phrases. The phrases have a random start time,</span><br> 
      <pre>Phrase phr = new Phrase((Math.random()*400) * SQ);<br></pre> <p>The start time is multiplied by 
        a Semiquaver so that a phrase always starts on a semiquaver subdivision. 
        This stochastic generation of the phrase start time is what spreads the 
        phrases over the music creating a changing, but overall similar, texture.</p>
      <p>You will notice how the word "makePhrase()" is used to fill 
        the Phrase "phrase".<br>
      </p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre><br>        	     	for(int j=0; j&lt;2;j++) {<br>        	        	Phrase phrase = new Phrase();<br>        	              	<span
 class="comment">// Use the makePhrase method (below)</span><br>        	        	phrase = makePhrase();<br>        	             	p.addPhrase(phrase);<br>        		}</pre> </td>
          </tr>
        </tbody>
      </table>
      <p>You will also notice that there is another method in this 
        class that is not a main method. &nbsp;It is called makePhrase():<br>
      </p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre><span class="comment"> 	/**<br> 	* This method generates a phrase based on a  random walk <br>	*/</span><br> 	private static Phrase makePhrase() {<br>        	Phrase phr = new Phrase((Math.random()*400) * SQ);<br>        	int pitch = (int)(Math.random()*60+30);<br>     		for(int i=0;i&lt;50;i++) {<br>               <br>		<span
 class="comment">	//randomly shift the pitch<br></span>               		pitch += (int)(Math.random()*10-5);<br>               <br>	<span
 class="comment">		// if the pitch walks out of the bounds, put it back to 60</span><br>                	if(pitch &lt;6 || pitch &gt; 94) pitch = 60;<br>               <br>                <span
 class="comment">	//make the note, with random velocity to make it interesting<br></span>                	Note n = new Note(pitch, SQ, (int)(Math.random()*70<br>                                  + 30));<br>            <br>		<span
 class="comment">	//add note to phrase<br></span>                	phr.addNote(n);<br>            	}<br>        	return phr;<br> 	}<br>}<br>            </pre> </td>
          </tr>
        </tbody>
      </table>
      <p>As the code is executing, it goes through each line, from 
        top to bottom. &nbsp;When it gets to <br>
      </p>
      <pre>        	        	phrase = makePhrase();<br></pre> <p>It goes straight into 
        the makePhrase method. &nbsp;In the makePhrase method, it makes a new 
        Phrase, and returns it to the place where "makePhrase()" was called. &nbsp;Programs 
        are organised like this so that you can organise things more easily and 
        reuse code multiple times.<br>
      </p>
      <p>Now for the actual algorithms:<br>
      </p>
      <p>The notes in each phrase start at a random pitch between 30 
        and 90 (60 + 30),</p>
      <pre>int pitch = (int)(Math.random()*60+30);<br></pre> <p>Pitch movement is by a random interval 
        from note to note (a Random walk),</p>
      <pre>pitch += (int)(Math.random()*10-5);<br></pre>
      <p>Becase this happens 50 time, the chances are that the pitch will eventually 
        exceed it's boundaries. &nbsp;<br>
        The MIDI range for pitch is 0-127. &nbsp;If it goes above this or below 
        it, we will get errors. &nbsp;If you want to change the boundaries, just 
        edit the line:<br>
      
      <pre>if(pitch &lt;6 || pitch &gt; 94) pitch = 60;</pre> 
      <p>This says: if the pitch becomes lower than 6 (just one step away from 
        becoming negative) or higher than 94 (you can set this to be as high as 
        122 if you like!), set it back to 60, which is middle C. </td>
    <!-- InstanceEndEditable --></tr>
  <tr> 
    <td align="left"> <div align="left"></div></td>
  </tr>
  <tr> 
    <td align="left">&nbsp;</td>
  </tr>
</table>
<blockquote> 
  <p name="Map"> 
    <map name="Map">
      <area shape="rect" coords="4,4,41,29" href="http://jmusic.ci.qut.edu" target="_blank" alt="jMusic">
      <area shape="rect" coords="43,5,80,31" href="http://www.ozco.gov.au" target="_blank" alt="Australia Council">
      <area shape="rect" coords="83,4,108,29" href="http://www.qut.com" target="_blank" alt="Queensland University of Technology">
    </map>
    <map name="Map2">
      <area shape="rect" coords="702,1,758,12" href="../../extras/sitemap.html" target="_self" alt="Sitemap">
      <area shape="rect" coords="629,1,687,12" href="../../extras/contact.html" target="_self" alt="Contact">
      <area shape="rect" coords="574,1,615,14" href="../../index.html" target="_self" alt="Home">
    </map>
    <map name="Map3">
      <area shape="rect" coords="553,5,601,18" href="#" alt="Home">
      <area shape="rect" coords="612,4,671,18" href="#">
      <area shape="rect" coords="683,3,735,19" href="#">
      <area shape="rect" coords="9,8,227,59" href="#" target="index.html">
    </map>
    <map name="Map4">
      <area shape="rect" coords="6,9,40,41" href="http://www.qut.com" target="_blank" alt="http://www.qut.com">
      <area shape="rect" coords="44,14,87,42" href="http://explodingart.com/jmusic" target="_blank" alt="http://explodingart.com/jmusic">
      <area shape="rect" coords="90,9,138,43" href="http://www.ozco.gov.au" target="_parent" alt="http://www.ozco.gov.au">
      <area shape="rect" coords="313,13,512,36" href="../../contact.html">
    </map>
  </p>
</blockquote>
<map name="Map5">
  <area shape="rect" coords="-7,4,228,51" href="../../index.htm" target="_self" alt="Digital Instrument making">
  <area shape="rect" coords="599,1,658,18" href="../../index.htm" alt="Home">
  <area shape="rect" coords="677,3,755,18" href="../../extras/contact.htm" target="extras">
</map>
</body>
<!-- InstanceEnd --></html>
