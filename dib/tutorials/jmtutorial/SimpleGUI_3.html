<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><!-- InstanceBegin template="/Templates/tutorial files.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<!-- InstanceBeginEditable name="doctitle" -->
<title>Digital Instrument Building</title>
<!-- InstanceEndEditable --> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<META NAME="DC.Creator" CONTENT="PersonalName= Andrew R. Brown  ">
<META NAME="DC.Creator.Email" CONTENT="algorithmicmusic@gmail.com,">
<META NAME="DC.Rights" CONTENT="Andrew R. Brown ">
<META NAME="DC.Title" CONTENT="Digital Instrument Building - Music software development with jMusic">
<META NAME="DC.Title.Alternative" content ="Music software development with jMusic">
<META NAME="DC.Subject" CONTENT="music, java, composition, algorithmic, digital music, generative music, instrument building, music analysing software development, Australia">
<META NAME="DC.Description" CONTENT="This site is a tutorial resource designed to assist in the training and self education of up-and-coming digital instrument developers. The tutorials cover topics including music software design, audio synthesis, digital signal processing, compositional systems, and computer programming concepts. ">
<META NAME="DC.Language" SCHEME="rfc1766" CONTENT="en-au">
<META NAME="DC.Audience" CONTENT="All">
<META NAME="DC.Date.Created" CONTENT="06-04-2003">
<META NAME="DC.Availability" CONTENT="PersonalName= Andrew R. Brown; email= algorithmicmusic@gmail.com">
<!-- ImageReady Preload Script (menubanner2.psd) -->
<SCRIPT TYPE="text/javascript">
<!--

function newImage(arg) {
	if (document.images) {
		rslt = new Image();
		rslt.src = arg;
		return rslt;
	}
}

function changeImages() {
	if (document.images && (preloadFlag == true)) {
		for (var i=0; i<changeImages.arguments.length; i+=2) {
			document[changeImages.arguments[i]].src = changeImages.arguments[i+1];
		}
	}
}

var preloadFlag = false;
function preloadImages() {
	if (document.images) {
		Music_algorithms_over = newImage("images/Music-algorithms-over.jpg");
		Interfaces_over = newImage("images/Interfaces-over.jpg");
		Programming_over = newImage("images/Programming-over.jpg");
		Acoustics_over = newImage("images/Acoustics-over.jpg");
		context_over = newImage("images/context-over.jpg");
		audio_over = newImage("images/audio-over.jpg");
		MIDI_over = newImage("images/MIDI-over.jpg");
		preloadFlag = true;
	}
}

// -->
</SCRIPT>
<!-- End Preload Script -->
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}
//-->
</script>
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_reloadPage(init) {  //reloads the window if Nav4 resized
  if (init==true) with (navigator) {if ((appName=="Netscape")&&(parseInt(appVersion)==4)) {
    document.MM_pgW=innerWidth; document.MM_pgH=innerHeight; onresize=MM_reloadPage; }}
  else if (innerWidth!=document.MM_pgW || innerHeight!=document.MM_pgH) location.reload();
}
MM_reloadPage(true);

function MM_nbGroup(event, grpName) { //v6.0
  var i,img,nbArr,args=MM_nbGroup.arguments;
  if (event == "init" && args.length > 2) {
    if ((img = MM_findObj(args[2])) != null && !img.MM_init) {
      img.MM_init = true; img.MM_up = args[3]; img.MM_dn = img.src;
      if ((nbArr = document[grpName]) == null) nbArr = document[grpName] = new Array();
      nbArr[nbArr.length] = img;
      for (i=4; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
        if (!img.MM_up) img.MM_up = img.src;
        img.src = img.MM_dn = args[i+1];
        nbArr[nbArr.length] = img;
    } }
  } else if (event == "over") {
    document.MM_nbOver = nbArr = new Array();
    for (i=1; i < args.length-1; i+=3) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = (img.MM_dn && args[i+2]) ? args[i+2] : ((args[i+1])? args[i+1] : img.MM_up);
      nbArr[nbArr.length] = img;
    }
  } else if (event == "out" ) {
    for (i=0; i < document.MM_nbOver.length; i++) {
      img = document.MM_nbOver[i]; img.src = (img.MM_dn) ? img.MM_dn : img.MM_up; }
  } else if (event == "down") {
    nbArr = document[grpName];
    if (nbArr)
      for (i=0; i < nbArr.length; i++) { img=nbArr[i]; img.src = img.MM_up; img.MM_dn = 0; }
    document[grpName] = nbArr = new Array();
    for (i=2; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = img.MM_dn = (args[i+1])? args[i+1] : img.MM_up;
      nbArr[nbArr.length] = img;
  } }
}
//-->
</script>
<link href="../../style/main.css" rel="stylesheet" type="text/css">
<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->
</head>
<body leftmargin="3" topmargin="3" marginwidth="0" marginheight="0"  onLoad="MM_preloadImages('../../images/banner/audio-over.jpg','../../images/banner/MIDI-over.jpg','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Interfaces-over.jpg','../../images/banner/Programming-over.jpg','../../images/banner/Acoustics-over.jpg','../../images/banner/context-over.jpg','../../images/banner/banner_08.gif')">
<table width="691" border="0" align="center">
  <tr> 
    <td colspan="5" align="left"> <div align="center"> 
        <table border="0" align="left" cellpadding="0" cellspacing="0">
          <tr> 
            <td colspan="8"><img src="../../images/banner.jpg" alt="" width=758 height=57 border="0" usemap="#Map5"></td>
          </tr>
          <tr> 
            <td width="50"><a href="../../Audio/audio.htm" target="_top" onClick="MM_nbGroup('down','group1','Audio','../../images/banner/audio-over.jpg',1)" onMouseOver="MM_nbGroup('over','Audio','../../images/banner/audio-over.jpg','../../images/banner/audio-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/audio.jpg" alt="audio" name="Audio" width="50" height="24" border="0" onload=""></a></td>
            <td width="47"><a href="../../midi/midi.htm" target="_top" onClick="MM_nbGroup('down','group1','MIDI','../../images/banner/MIDI-over.jpg',1)" onMouseOver="MM_nbGroup('over','MIDI','../../images/banner/MIDI-over.jpg','../../images/banner/MIDI-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/MIDI.jpg" alt="MIDI" name="MIDI" width="47" height="24" border="0" onload=""></a></td>
            <td width="117"><a href="../../musalgo/musalgo.htm" target="_top" onClick="MM_nbGroup('down','group1','musalgorithms','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOver="MM_nbGroup('over','musalgorithms','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Music-algorithms.jpg" alt="Music Algorithms" name="musalgorithms" width="117" height="24" border="0" onload=""></a></td>
            <td width="88"><a href="../../interfaces/interface.htm" target="_top" onClick="MM_nbGroup('down','group1','Interfaces','../../images/banner/Interfaces-over.jpg',1)" onMouseOver="MM_nbGroup('over','Interfaces','../../images/banner/Interfaces-over.jpg','../../images/banner/Interfaces-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Interfaces.jpg" alt="Interfaces" name="Interfaces" width="88" height="24" border="0" onload=""></a></td>
            <td width="103"><a href="../../programming/programming.htm" target="_top" onClick="MM_nbGroup('down','group1','Programming','../../images/banner/Programming-over.jpg',1)" onMouseOver="MM_nbGroup('over','Programming','../../images/banner/Programming-over.jpg','../../images/banner/Programming-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Programming.jpg" alt="Programming" name="Programming" width="103" height="24" border="0" onload=""></a></td>
            <td width="81"><a href="../../acoustics/acoustics.htm" target="_top" onClick="MM_nbGroup('down','group1','Acoustics','../../images/banner/Acoustics-over.jpg',1)" onMouseOver="MM_nbGroup('over','Acoustics','../../images/banner/Acoustics-over.jpg','../../images/banner/Acoustics-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Acoustics.jpg" alt="Acoustics" name="Acoustics" width="81" height="24" border="0" onload=""></a></td>
            <td width="100"><a href="../../context/context.htm" target="_top" onClick="MM_nbGroup('down','group1','Context','../../images/banner/context-over.jpg',1)" onMouseOver="MM_nbGroup('over','Context','../../images/banner/context-over.jpg','../../images/banner/context-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/context.jpg" alt="Context" name="Context" width="100" height="24" border="0" onload=""></a></td>
            <td width="156"><img src="../../images/banner/banner_09.gif" width="172" height="24"></td>
          </tr>
        </table>
      </div></td>
  </tr>
  <tr> 
    <td width="3" align="left"> <div align="right"></div>
      <div align="right"></div>
      <div align="right"></div></td>
    <!-- InstanceBeginEditable name="tracker" -->
    <td height="16" colspan="2" rowspan="2"><a href="../../interfaces/interface.htm">&gt; 
      Interface </a>&gt; <a href="../../interfaces/guiconst.htm">GUI construction 
      </a> &gt;<a href="Markov0.html"> </a><a href="SimpleGUI_3.html">Graphical 
      User Interface - Stage 3</a> </td>
    <!-- InstanceEndEditable -->
    <td width="15" rowspan="2" align="left">&nbsp;</td>
    <td width="214" rowspan="2" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="3" rowspan="3" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="66" align="left" valign="top">&nbsp;</td>
    <td width="444" align="left" valign="top">&nbsp;</td>
    <td colspan="2" align="left" valign="top"><strong></strong></td>
  </tr>
  <tr> <!-- InstanceBeginEditable name="content" --> 
    <td colspan="4" rowspan="3" align="left" valign="top"> <h2>Graphical User 
        Interface - Stage 3 </h2>
      <p>This third stage adds three new aspects to the GUI.</p>
      <p>1) It introduces the GridLayout which organises the arrangement 
        of components in the frame.</p>
      <p>2) It adds more Text Fields so that variables in the music composition 
        algorithms can be varied at each run. <br>
        These also require text labels to name the fields and some conversion 
        from the text field to variable integers.</p>
      <p>3) We finally make the close box work. Such that it closes 
        the window and shuts down the program.</p>
      <p class="c6"><a class="c5" href="../jmdemos/SimpleGUI3.java"
 target="_top">Click here to view source.</a></p>
      <p>This is what the GUI will look similar to this.</p>
      <img
 src="Images/GUI_3.gif" alt="gui" width="272" height="179" align="bottom" x-sas-useimagewidth=""
 x-sas-useimageheight=""></p> 
      <p>Let's have a closer look.</p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre class="c7">import java.awt.*;<br>import java.awt.event.*;<br>import jm.JMC;<br>import jm.music.data.*;<br>import jm.util.*;<br></pre> </td>
          </tr>
        </tbody>
      </table>
      We import the usual suspects including the awt and awt.event 
      classes for the GUI.<br> <br> <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>public class SimpleGUI3 extends Frame implements ActionListener, WindowListener, JMC{<span
 class="comment">	<br>	//--------------<br>	// Attributes shared within the class</span>	<br>	//--------------	<br>	TextField fileNameBox;<br>	TextField minPitch;<br>	TextField maxPitch;<br>	TextField numOfNotes;<br>     	Button composeBtn;<br><span
 class="comment">	//--------------<br></span>		<span
 class="comment">// simple main method called when the class in run</span>	<br><span
 class="comment">	//--------------</span>		<br>	public static void main(String[] args) {<br>	       new SimpleGUI3();<br>	}
            </pre> </td>
          </tr>
        </tbody>
      </table>
      The class definition implements three things, the ActionListener 
      and WindowListener which monitor user actions, and the JMC for the jMusic 
      constants.<br> <br> <p>This GUI has four TextFields which 
        are next declared.</p>
      <p>The main() method is a simple call to the constructor.</p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre><span class="comment">	// constructor</span>		<br>	public SimpleGUI3() {<br>	<span
 class="comment">	//give the window a name</span>		       <br>		super("An almost real Application");<br>	      	<span
 class="comment">//register the closebox event</span>		       <br>		this.addWindowListener(this);<br>	      	<span
 class="comment">// change the colour of the frame background</span>		       <br>		this.setBackground(Color.green);<br>	       <br> <span
 class="comment">		//set the layout for the Frame</span>		       <br>		this.setLayout(new GridLayout(5, 2, 5, 0));<br>	       <br> <span
 class="comment">		//add the components</span>		       <br>		Label minPL = new Label("Minimum MIDI Pitch", Label.RIGHT);<br>	       	this.add(minPL);<br>	       <br>	       	minPitch = new TextField("50");<br>	       	minPitch.setBackground(Color.lightGray);<br>	       	this.add(minPitch);
            </pre> 
            </td>
          </tr>
        </tbody>
      </table>
      <br> <br> <p>The first part of the constructor (which does most 
        of the work in this class) calls the Frame class (super class) with the 
        window title, the frame is registered with the windowListener and its 
        background colour set to green.</p>
      <p>The Frame employs the GridLayout which arranges areas in the frame into 
        equal sized rectangles. <br>
        The arguments are number-of-rows, number-of-collumns, horizontal-gap-between-cells, 
        vertical-gap-between-cells.</p>
      <p>The first label and text field are next added to the frame.</p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>             	Label maxPL = new Label("Maximum MIDI Pitch", Label.RIGHT);<br>	       	this.add(maxPL);<br>	       <br>	       	maxPitch = new TextField("70");<br>	       	maxPitch.setBackground(Color.lightGray);<br>	       	this.add(maxPitch);<br>	       <br>	       	Label numNL = new Label("Number of notes", Label.RIGHT);<br>	       	this.add(numNL);<br>	       <br>	       	numOfNotes = new TextField("12");<br>	       	numOfNotes.setBackground(Color.lightGray);<br>	       	this.add(numOfNotes);<br>	       <br>	       	Label fNameLable = new Label("MIDI file name", Label.RIGHT);<br>	       	this.add(fNameLable);<br>	       <br>	       	fileNameBox = new TextField("SimpleGUI_3.mid");<br>	       	fileNameBox.setBackground(Color.lightGray);<br>	       	this.add(fileNameBox);<br>	       <br>	       	Label dummy = new Label("", Label.RIGHT);<br>	       	this.add(dummy);<br>	       <br>		<span
 class="comment">//create a panel to put the button on</span>	<br>	   <span class="comment">// so it doesn't fill the grid space </span>		       <br>		Panel p = new Panel();<br>	       <br>		<span
 class="comment">//add the button</span>		       <br>		composeBtn = new Button("Compose");<br>	       	composeBtn.addActionListener(this);<br>	       	composeBtn.setActionCommand("Create");<br>	       	p.add(composeBtn);<br>	       <br><span
 class="comment">		//put the panel in the frame	       </span>	<br>		this.add(p);<br>	       <br>		<span
 class="comment">//display the window</span>		       <br>		this.pack();                                                    <br>	       	this.show();<br>	}
            </pre> </td>
          </tr>
        </tbody>
      </table>
      <br> <br> <p>The second part of the constructor continues to 
        add elements to the frame as we have seen in earlier GUI tutorials.</p>
      <p>The button is this time put on to a panel. Doing this stops the button 
        occupying the entire space of the cell in the frame. <br>
        On a panel the button is more well behaved, its size is determined by 
        the button label and OS look and feel. <br>
        A panel called 'p' is created, the button is declared and added to the 
        panel, then the panel is added to the frame layout.</p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre><span class="comment">	// Deal with the window closebox</span>	<br>	public void windowClosing(WindowEvent we) {<br>		System.exit(0);<br>	}<br> <br><span
 class="comment">	//other WindowListener interface methods</span>	<br>&nbsp;<span class="comment">//They do nothing but are required to be present</span>		<br>	public void windowActivated(WindowEvent we) {};<br>	public void windowClosed(WindowEvent we) {};<br>	public void windowDeactivated(WindowEvent we) {};<br>	public void windowIconified(WindowEvent we) {};<br>	public void windowDeiconified(WindowEvent we) {};<br>	public void windowOpened(WindowEvent we) {};
            </pre> 
            </td>
          </tr>
        </tbody>
      </table>
      <br> <br>
      <p>Here the user events 'seen' by the WindowListener interface are dealt 
        with. <br>
        The only one we are concerned with is the WindowClosing event which is 
        generated when the window's close box is clicked.<br>
        When this happens the Java application is simply told to quit with the 
        command <font face="Courier New, Courier, mono">System.exit(0)</font> 
        . <br>
        When implementing an interface all the methods of the interface must be 
        overridden, and that is why we have all the other window method stubs 
        - that is they consist only of {} and so do nothing. It would be easy 
        now to add code to deal with each of these events. it also gives you a 
        good idea of the kinds of window events that can be caught.</p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre><span class="comment">	// Deal with the button click	</span><br>	public void actionPerformed(ActionEvent ae) {<br>	       if (ae.getSource() == composeBtn) {<br>	               String fn = fileNameBox.getText();<br>	                       if (fn != null) {<br>	                               makeMusic(fn, <br>						 Integer.valueOf(<br>						minPitch.getText()).intValue(), <br>	                                         Integer.valueOf(<br>						maxPitch.getText()).intValue(), <br>	                                       	 Integer.valueOf(<br>					     numOfNotes.getText()).intValue());<br>	                       } else makeMusic("SimpleGUI_3.mid", <br>						Integer.valueOf(<br>						minPitch.getText()).intValue(), <br>	                                       	Integer.valueOf(<br>						maxPitch.getText()).intValue(), <br>	                                       	Integer.valueOf(<br>					     numOfNotes.getText()).intValue());<br>	       }<br>	}
            </pre> 
            </td>
          </tr>
        </tbody>
      </table>
      <p>This method deals with the button click. It check to see if 
        there is a name of the MIDI file in the TextField, if so it gets all values 
        and passes them to the makeMusic() method. If not, it gets other values 
        and passes a default file name to the makeMusic() method.</p>
      <p>Notice that to get the numerical values from the TextFields 
        they must be converted from strings to integers with code similar to:</p>
      <p>Integer.valueOf(minPitch.getText()).intValue()</p>
      <p>Where minPitch is the name of the TextField. Complicated I admit, but 
        . . . just copy it and use it.</p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>	public void makeMusic(String fileName, int minPitchVal, int maxPitchVal, <br>			      int numOfNotesVal) {<br>		Score scale = new Score("JMDemo - SimpleGUI_3");<br>	     	Part inst = new Part("Music", ATMOSPHERE, 0);<br>	       	Phrase phr = new Phrase(0.0); <br>	       <br>	       	for(short i=0;i&lt;numOfNotesVal;i++){<br>	        	Note note = new Note((int)((Math.random()*<br>                                                    Math.abs(maxPitchVal-<br>                                                             minPitchVal))+<br>                                                   minPitchVal), <br>                                                   SQ, <br>                                                   (int)(Math.random() * 80 + <br>                                                         40));<br>			phr.addNote(note);<br>	      	}<br>	      	inst.addPhrase(phr);<br>	      	scale.addPart(inst);<br>	       	<br><span
 class="comment">		//write a MIDI file to disk	       </span><br>		Write.midi(scale, fileName)<br>	}<br>}
            </pre> </td>
          </tr>
        </tbody>
      </table>
      <p>This is the code which generates the jMusic score. It simply 
        generates a stochastic melody with stochastic dynamics.</p>
     
      </td>
    <!-- InstanceEndEditable --></tr>
  <tr> 
    <td align="left"> <div align="left"></div></td>
  </tr>
  <tr> 
    <td align="left">&nbsp;</td>
  </tr>
</table>
<blockquote> 
  <p name="Map"> 
    <map name="Map">
      <area shape="rect" coords="4,4,41,29" href="http://jmusic.ci.qut.edu" target="_blank" alt="jMusic">
      <area shape="rect" coords="43,5,80,31" href="http://www.ozco.gov.au" target="_blank" alt="Australia Council">
      <area shape="rect" coords="83,4,108,29" href="http://www.qut.com" target="_blank" alt="Queensland University of Technology">
    </map>
    <map name="Map2">
      <area shape="rect" coords="702,1,758,12" href="../../extras/sitemap.html" target="_self" alt="Sitemap">
      <area shape="rect" coords="629,1,687,12" href="../../extras/contact.html" target="_self" alt="Contact">
      <area shape="rect" coords="574,1,615,14" href="../../index.html" target="_self" alt="Home">
    </map>
    <map name="Map3">
      <area shape="rect" coords="553,5,601,18" href="#" alt="Home">
      <area shape="rect" coords="612,4,671,18" href="#">
      <area shape="rect" coords="683,3,735,19" href="#">
      <area shape="rect" coords="9,8,227,59" href="#" target="index.html">
    </map>
    <map name="Map4">
      <area shape="rect" coords="6,9,40,41" href="http://www.qut.com" target="_blank" alt="http://www.qut.com">
      <area shape="rect" coords="44,14,87,42" href="http://explodingart.com/jmusic" target="_blank" alt="http://explodingart.com/jmusic">
      <area shape="rect" coords="90,9,138,43" href="http://www.ozco.gov.au" target="_parent" alt="http://www.ozco.gov.au">
      <area shape="rect" coords="313,13,512,36" href="../../contact.html">
    </map>
  </p>
</blockquote>
<map name="Map5">
  <area shape="rect" coords="-7,4,228,51" href="../../index.htm" target="_self" alt="Digital Instrument making">
  <area shape="rect" coords="599,1,658,18" href="../../index.htm" alt="Home">
  <area shape="rect" coords="677,3,755,18" href="../../extras/contact.htm" target="extras">
</map>
</body>
<!-- InstanceEnd --></html>
