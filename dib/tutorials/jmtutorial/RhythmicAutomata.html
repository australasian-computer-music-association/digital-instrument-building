<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><!-- InstanceBegin template="/Templates/tutorial files.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<!-- InstanceBeginEditable name="doctitle" --> 
<title>Digital Instrument Building</title>
<!-- InstanceEndEditable --> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<META NAME="DC.Creator" CONTENT="PersonalName= Andrew R. Brown  ">
<META NAME="DC.Creator.Email" CONTENT="algorithmicmusic@gmail.com,">
<META NAME="DC.Rights" CONTENT="Andrew R. Brown ">
<META NAME="DC.Title" CONTENT="Digital Instrument Building - Music software development with jMusic">
<META NAME="DC.Title.Alternative" content ="Music software development with jMusic">
<META NAME="DC.Subject" CONTENT="music, java, composition, algorithmic, digital music, generative music, instrument building, music analysing software development, Australia">
<META NAME="DC.Description" CONTENT="This site is a tutorial resource designed to assist in the training and self education of up-and-coming digital instrument developers. The tutorials cover topics including music software design, audio synthesis, digital signal processing, compositional systems, and computer programming concepts. ">
<META NAME="DC.Language" SCHEME="rfc1766" CONTENT="en-au">
<META NAME="DC.Audience" CONTENT="All">
<META NAME="DC.Date.Created" CONTENT="06-04-2003">
<META NAME="DC.Availability" CONTENT="PersonalName= Andrew R. Brown; email= algorithmicmusic@gmail.com">
<!-- ImageReady Preload Script (menubanner2.psd) -->
<SCRIPT TYPE="text/javascript">
<!--

function newImage(arg) {
	if (document.images) {
		rslt = new Image();
		rslt.src = arg;
		return rslt;
	}
}

function changeImages() {
	if (document.images && (preloadFlag == true)) {
		for (var i=0; i<changeImages.arguments.length; i+=2) {
			document[changeImages.arguments[i]].src = changeImages.arguments[i+1];
		}
	}
}

var preloadFlag = false;
function preloadImages() {
	if (document.images) {
		Music_algorithms_over = newImage("images/Music-algorithms-over.jpg");
		Interfaces_over = newImage("images/Interfaces-over.jpg");
		Programming_over = newImage("images/Programming-over.jpg");
		Acoustics_over = newImage("images/Acoustics-over.jpg");
		context_over = newImage("images/context-over.jpg");
		audio_over = newImage("images/audio-over.jpg");
		MIDI_over = newImage("images/MIDI-over.jpg");
		preloadFlag = true;
	}
}

// -->
</SCRIPT>
<!-- End Preload Script -->
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}
//-->
</script>
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_reloadPage(init) {  //reloads the window if Nav4 resized
  if (init==true) with (navigator) {if ((appName=="Netscape")&&(parseInt(appVersion)==4)) {
    document.MM_pgW=innerWidth; document.MM_pgH=innerHeight; onresize=MM_reloadPage; }}
  else if (innerWidth!=document.MM_pgW || innerHeight!=document.MM_pgH) location.reload();
}
MM_reloadPage(true);

function MM_nbGroup(event, grpName) { //v6.0
  var i,img,nbArr,args=MM_nbGroup.arguments;
  if (event == "init" && args.length > 2) {
    if ((img = MM_findObj(args[2])) != null && !img.MM_init) {
      img.MM_init = true; img.MM_up = args[3]; img.MM_dn = img.src;
      if ((nbArr = document[grpName]) == null) nbArr = document[grpName] = new Array();
      nbArr[nbArr.length] = img;
      for (i=4; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
        if (!img.MM_up) img.MM_up = img.src;
        img.src = img.MM_dn = args[i+1];
        nbArr[nbArr.length] = img;
    } }
  } else if (event == "over") {
    document.MM_nbOver = nbArr = new Array();
    for (i=1; i < args.length-1; i+=3) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = (img.MM_dn && args[i+2]) ? args[i+2] : ((args[i+1])? args[i+1] : img.MM_up);
      nbArr[nbArr.length] = img;
    }
  } else if (event == "out" ) {
    for (i=0; i < document.MM_nbOver.length; i++) {
      img = document.MM_nbOver[i]; img.src = (img.MM_dn) ? img.MM_dn : img.MM_up; }
  } else if (event == "down") {
    nbArr = document[grpName];
    if (nbArr)
      for (i=0; i < nbArr.length; i++) { img=nbArr[i]; img.src = img.MM_up; img.MM_dn = 0; }
    document[grpName] = nbArr = new Array();
    for (i=2; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = img.MM_dn = (args[i+1])? args[i+1] : img.MM_up;
      nbArr[nbArr.length] = img;
  } }
}
//-->
</script>
<link href="../../style/main.css" rel="stylesheet" type="text/css">
<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->
</head>
<body leftmargin="3" topmargin="3" marginwidth="0" marginheight="0"  onLoad="MM_preloadImages('../../images/banner/audio-over.jpg','../../images/banner/MIDI-over.jpg','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Interfaces-over.jpg','../../images/banner/Programming-over.jpg','../../images/banner/Acoustics-over.jpg','../../images/banner/context-over.jpg','../../images/banner/banner_08.gif')">
<table width="691" border="0" align="center">
  <tr> 
    <td colspan="5" align="left"> <div align="center"> 
        <table border="0" align="left" cellpadding="0" cellspacing="0">
          <tr> 
            <td colspan="8"><img src="../../images/banner.jpg" alt="" width=758 height=57 border="0" usemap="#Map5"></td>
          </tr>
          <tr> 
            <td width="50"><a href="../../Audio/audio.htm" target="_top" onClick="MM_nbGroup('down','group1','Audio','../../images/banner/audio-over.jpg',1)" onMouseOver="MM_nbGroup('over','Audio','../../images/banner/audio-over.jpg','../../images/banner/audio-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/audio.jpg" alt="audio" name="Audio" width="50" height="24" border="0" onload=""></a></td>
            <td width="47"><a href="../../midi/midi.htm" target="_top" onClick="MM_nbGroup('down','group1','MIDI','../../images/banner/MIDI-over.jpg',1)" onMouseOver="MM_nbGroup('over','MIDI','../../images/banner/MIDI-over.jpg','../../images/banner/MIDI-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/MIDI.jpg" alt="MIDI" name="MIDI" width="47" height="24" border="0" onload=""></a></td>
            <td width="117"><a href="../../musalgo/musalgo.htm" target="_top" onClick="MM_nbGroup('down','group1','musalgorithms','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOver="MM_nbGroup('over','musalgorithms','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Music-algorithms.jpg" alt="Music Algorithms" name="musalgorithms" width="117" height="24" border="0" onload=""></a></td>
            <td width="88"><a href="../../interfaces/interface.htm" target="_top" onClick="MM_nbGroup('down','group1','Interfaces','../../images/banner/Interfaces-over.jpg',1)" onMouseOver="MM_nbGroup('over','Interfaces','../../images/banner/Interfaces-over.jpg','../../images/banner/Interfaces-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Interfaces.jpg" alt="Interfaces" name="Interfaces" width="88" height="24" border="0" onload=""></a></td>
            <td width="103"><a href="../../programming/programming.htm" target="_top" onClick="MM_nbGroup('down','group1','Programming','../../images/banner/Programming-over.jpg',1)" onMouseOver="MM_nbGroup('over','Programming','../../images/banner/Programming-over.jpg','../../images/banner/Programming-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Programming.jpg" alt="Programming" name="Programming" width="103" height="24" border="0" onload=""></a></td>
            <td width="81"><a href="../../acoustics/acoustics.htm" target="_top" onClick="MM_nbGroup('down','group1','Acoustics','../../images/banner/Acoustics-over.jpg',1)" onMouseOver="MM_nbGroup('over','Acoustics','../../images/banner/Acoustics-over.jpg','../../images/banner/Acoustics-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Acoustics.jpg" alt="Acoustics" name="Acoustics" width="81" height="24" border="0" onload=""></a></td>
            <td width="100"><a href="../../context/context.htm" target="_top" onClick="MM_nbGroup('down','group1','Context','../../images/banner/context-over.jpg',1)" onMouseOver="MM_nbGroup('over','Context','../../images/banner/context-over.jpg','../../images/banner/context-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/context.jpg" alt="Context" name="Context" width="100" height="24" border="0" onload=""></a></td>
            <td width="156"><img src="../../images/banner/banner_09.gif" width="172" height="24"></td>
          </tr>
        </table>
      </div></td>
  </tr>
  <tr> 
    <td width="3" align="left"> <div align="right"></div>
      <div align="right"></div>
      <div align="right"></div></td>
    <!-- InstanceBeginEditable name="tracker" --> 
    <td height="16" colspan="2" rowspan="2" align="left"><a href="../../musalgo/musalgo.htm">&gt; 
      Music Algorithms </a>&gt; <a href="../../musalgo/generate.htm">Generating</a> 
      &gt;<a href="RandomRhythmDemo.html"> </a> <a href="RhythmicAutomata.html">Rhythmic 
      Automata</a></td>
    <!-- InstanceEndEditable -->
    <td width="15" rowspan="2" align="left">&nbsp;</td>
    <td width="214" rowspan="2" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="3" rowspan="3" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="66" align="left" valign="top">&nbsp;</td>
    <td width="444" align="left" valign="top">&nbsp;</td>
    <td colspan="2" align="left" valign="top"><strong></strong></td>
  </tr>
  <tr> <!-- InstanceBeginEditable name="content" --> 
    <td colspan="4" rowspan="3" align="left" valign="top">
        <h2 >Rhythmic Automata</h2>
     
      <p>In this tutorial Cellular Automata are mapped to rhythm. In my view this 
        is a more musically sucessful mapping and the evolving nature of the automata 
        is more clearly evident becuase a one-dimensional matrix is used (i.e, 
        an array or list of cells).</p>
      <p>Each cell in the array represents one semi-quaver and, in 
        the score, notes are sounded on 'live' cells while rests are used where 
        the cells are 'dead.'</p>
      <p>The rules that are applied to update the cells each iteration 
        are the key to the musical style that emerges. These rules are, like traditional 
        CA, based on the number of neighboring cells. Musically this relates to 
        rhythmic density; the more neighbours a semi-quaver has the more densly 
        populated is that area of the bar. So, by varying the rules you can provide 
        sparseness (density) tendencies. As well, rules influence the liklihood 
        of cell change and thus the stability of the rhytmic patterns (how quickly 
        they evolve).</p>
      <p><a href="soundExamples/RhythmicAutomata.mid">This is what 
        the result sounds like.</a></p>
      <p>Here is the source file.</p>
      <p><a href="../jmdemos/RhythmicAutomata.java">RhythmicAutomata.java</a></p>
      <p>Let's have a closer look.</p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>import jm.music.data.*;<br>import jm.JMC;<br>import jm.util.*;<br></pre> </td>
          </tr>
        </tbody>
      </table>
      <br> <br> <p>We import the jMusic constants, the data types, 
        and the Util package that contains the Write class.</p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>public class RhythmicAutomata implements JMC{ <span
 class="comment">   <br>	/* declare the empty bar arrays */</span>    <br>	int barLength = 16;<br>    	int[] bar = new int[barLength];<br>    	int[] tempBar = new int[barLength]; <span
 class="comment">   <br>	/* Declare the jMusic score and parts */</span>    <br>	Part part1 = new Part("Hats", 0, 9);<br>    	Part part2 = new Part("Rim Shot", 0, 9);<br>    	Part part3 = new Part("Claps", 0, 9);<br>    	Score score = new Score("AlgoRhythm", 84);
            </pre> </td>
          </tr>
        </tbody>
      </table>
      <br> <br> <p>The class is decared and so are a number of class 
        variables. Notice that an array of int's called 'bar' is declared. This 
        holds the once dimensional cell matrix. The 'tempBar' array is used when 
        we apply the rules to evolve the array one genertion.</p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre> 	public static void main(String[] args) {<br>        	new RhythmicAutomata();<br>    	}<br></pre> </td>
          </tr>
        </tbody>
      </table>
      <br> <br> <p>The main() method creates an instance of this class.</p>
      <p>Create one part of music bar by bar</p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>	public RhythmicAutomata() {</span> <span
 class="comment">       <br>		/* fill array */</span>       <br>		initialise();<br>        	makeMusic(part1, 42);<br></span> <span
 class="comment">       	/* calc next array */</span>        <br>		for(int i=0; i&lt;23; i++) {<br>            		nextBar();<br>            		makeMusic(part1, 42);<br>            		printBar();<br>        	}</span>
            </pre> 
            </td>
          </tr>
        </tbody>
      </table>
      <br> <br> <p>The constructor makes a couple of method calls to 
        fill the array (see details below), then sets up a loop that generates 
        23 bars of music, printing the state of the array to the terminal each 
        time through.</p>
      <p>Pack parts into the score and export</p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>      		score.addPart(part1);<br>       </span> <span
 class="comment">       	<br>		/* save as a MIDI file */</span>        <br>		Write.midi(score, "RhythmicAutomata.mid");<br>    	}</span>
            </pre> </td>
          </tr>
        </tbody>
      </table>
      <br> <p>This should be familiar to jMusic coders. Add the part 
        with 23 phrases of one bar each into a score then translate it into a 
        standard MIDI file.</p>
      <p>Set up an inital array of cells</p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>	private void initialise() {<br>        	System.out.println();<br>        	System.out.println("====== Initialising automata array ======");<br>        	for(int i=0; i&lt;barLength; i++) {<br>        		bar[i] = (int)(Math.random() * 2);<br>        	}<br>        	printBar();<br>    	}<br></pre> 
            </td>
          </tr>
        </tbody>
      </table>
      <br> <p>The constructor called many methods. The initialise() 
        method is the first of them.</p>
      <p>It beings our displaying of the data using println statements.</p>
      <p>The for-loop sets up the values of the cells choosing randomly between 
        1 and 0.</p>
      <p>Display the music at the command line</p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>	private void printBar() {<br>        	for (int i=0; i&lt;barLength; i++) {<br>            		System.out.print(bar[i] + " ");<br>        	}<br>        	System.out.println();<br>    	}<br></pre> </td>
          </tr>
        </tbody>
      </table>
      <br> <br> <p>This method prints the contens of the array to the 
        terminal as a string of 1s or 0s.</p>
      <p>Notice that the System.out.print() method does not add a carrage 
        return, after each cell value is added a System.out.prinln() method adds 
        the 'return' at the end of the line.</p>
      <p>Apply the CA rules for one generation</p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>>  	private void nextBar() {<br>        	int score = 0;</span> <span
 class="comment">       <br>		/* calculate the number of neighbours */</span>        <br>		for(int i=0; i&lt;barLength; i++) {<br>            		for(int j=1; j&lt;3; j++) {<br>                		if (i-j &gt; 0) score += bar[i - j];<br>                		if (i+j &lt; barLength) score += bar[i +j];<br>            		}</span> <span
 class="comment">           <br>			/* apply the rules of evolution */</span>            <br>			if (score == 0) {<br>                		if (bar[i] == 1) tempBar[i] = 0;<br>                		else tempBar[i] = 1;<br>            		}<br>            		if (score == 1) tempBar[i] = bar[i];<br>            		if (score == 2) tempBar[i] = bar[i];<br>            		if (score == 3) {<br>                		if (bar[i] == 1) tempBar[i] = 0;<br>                		else tempBar[i] = 1;<br>            		}<br>            		if (score == 4) tempBar[i] = 0;</span> <span
 class="comment">           <br>			/* reset score value for next index */</span>            <br>			score = 0;<br>        	}</span> <span
 class="comment">       <br>		/* shift new values in */</span>        <br>		bar = tempBar;<br>    	}</span>
            </pre> </td>
          </tr>
        </tbody>
      </table>
      <br> <br>
      <p>This is the guts of the program. In this method the rules are applied.<br>
        First the number of live (1) cells three palces either side of the current 
        cell are counted.<br>
        (The variable score here is unfortunate - it is not a jMusic score, but 
        the numbers of 1's that have been encouted).</p>
      <p>Depending upon the number of active neighbours this cell either lives 
        or dies.<br>
        If it has 1 or 2 neighbours it is unchanged, if it has 3 neighors and 
        is alive it changes its state, and if it has four neighbours it's getting 
        too crowded and it dies.</p>
      <p>The 'tempBar' array is used to store the values of the next 
        iteration during this process, once completed its contents are transferred 
        to the 'bar' variable and become the current state.</p>
      <p>Create one bar of music</p>
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>	private void makeMusic(Part p, int pitch) {<br>	        Phrase phr = new Phrase();<br>        	for (int i=0; i&lt;barLength; i++) {<br>        	    	if (bar[i] == 0) phr.addNote(new Note (REST, SQ));<br>            		else phr.addNote(new Note(pitch,<br>                                         SQ, (int)(Math.random() * 60 + 60)));<br>        	}<br>        	p.addPhrase(phr);<br>    	}<br>}<br></pre> 
            </td>
          </tr>
        </tbody>
      </table>
      <br> <br>
      <p>The makeMusic() method turns the 1s and 0s into notes and rests.<br>
        Each phrase thus created is added to the part.<br>
        This method is called once for each bar of music that is required.</p>
      <p>Things to do to modify this class</p>
      <p>// Try changing sounds</p>
      <p>// Try changing tempo</p>
      <p>// Try changing bar length</p>
      <p>// Try adding another part</p>
      <p>// Try capturing bars then playing in reverse order - going 
        from cohesive -&gt; random</p>
      <p>// Try changing the rules</p>
      <p>// Try making it take into account 3 neighbours each side 
        rather than 2</p>
      <p>// Try starting with composed patterns rather than random 
        patterns</p>

      </td>
    <!-- InstanceEndEditable --></tr>
  <tr> 
    <td align="left"> <div align="left"></div></td>
  </tr>
  <tr> 
    <td align="left">&nbsp;</td>
  </tr>
</table>
<blockquote> 
  <p name="Map"> 
    <map name="Map">
      <area shape="rect" coords="4,4,41,29" href="http://jmusic.ci.qut.edu" target="_blank" alt="jMusic">
      <area shape="rect" coords="43,5,80,31" href="http://www.ozco.gov.au" target="_blank" alt="Australia Council">
      <area shape="rect" coords="83,4,108,29" href="http://www.qut.com" target="_blank" alt="Queensland University of Technology">
    </map>
    <map name="Map2">
      <area shape="rect" coords="702,1,758,12" href="../../extras/sitemap.html" target="_self" alt="Sitemap">
      <area shape="rect" coords="629,1,687,12" href="../../extras/contact.html" target="_self" alt="Contact">
      <area shape="rect" coords="574,1,615,14" href="../../index.html" target="_self" alt="Home">
    </map>
    <map name="Map3">
      <area shape="rect" coords="553,5,601,18" href="#" alt="Home">
      <area shape="rect" coords="612,4,671,18" href="#">
      <area shape="rect" coords="683,3,735,19" href="#">
      <area shape="rect" coords="9,8,227,59" href="#" target="index.html">
    </map>
    <map name="Map4">
      <area shape="rect" coords="6,9,40,41" href="http://www.qut.com" target="_blank" alt="http://www.qut.com">
      <area shape="rect" coords="44,14,87,42" href="http://explodingart.com/jmusic" target="_blank" alt="http://explodingart.com/jmusic">
      <area shape="rect" coords="90,9,138,43" href="http://www.ozco.gov.au" target="_parent" alt="http://www.ozco.gov.au">
      <area shape="rect" coords="313,13,512,36" href="../../contact.html">
    </map>
  </p>
</blockquote>
<map name="Map5">
  <area shape="rect" coords="-7,4,228,51" href="../../index.htm" target="_self" alt="Digital Instrument making">
  <area shape="rect" coords="599,1,658,18" href="../../index.htm" alt="Home">
  <area shape="rect" coords="677,3,755,18" href="../../extras/contact.htm" target="extras">
</map>
</body>
<!-- InstanceEnd --></html>
