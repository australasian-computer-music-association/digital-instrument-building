<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><!-- InstanceBegin template="/Templates/tutorial files.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<!-- InstanceBeginEditable name="doctitle" -->
<title>Digital Instrument Building</title>
<!-- InstanceEndEditable --> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<META NAME="DC.Creator" CONTENT="PersonalName= Andrew R. Brown  ">
<META NAME="DC.Creator.Email" CONTENT="algorithmicmusic@gmail.com,">
<META NAME="DC.Rights" CONTENT="Andrew R. Brown ">
<META NAME="DC.Title" CONTENT="Digital Instrument Building - Music software development with jMusic">
<META NAME="DC.Title.Alternative" content ="Music software development with jMusic">
<META NAME="DC.Subject" CONTENT="music, java, composition, algorithmic, digital music, generative music, instrument building, music analysing software development, Australia">
<META NAME="DC.Description" CONTENT="This site is a tutorial resource designed to assist in the training and self education of up-and-coming digital instrument developers. The tutorials cover topics including music software design, audio synthesis, digital signal processing, compositional systems, and computer programming concepts. ">
<META NAME="DC.Language" SCHEME="rfc1766" CONTENT="en-au">
<META NAME="DC.Audience" CONTENT="All">
<META NAME="DC.Date.Created" CONTENT="06-04-2003">
<META NAME="DC.Availability" CONTENT="PersonalName= Andrew R. Brown; email= algorithmicmusic@gmail.com">
<!-- ImageReady Preload Script (menubanner2.psd) -->
<SCRIPT TYPE="text/javascript">
<!--

function newImage(arg) {
	if (document.images) {
		rslt = new Image();
		rslt.src = arg;
		return rslt;
	}
}

function changeImages() {
	if (document.images && (preloadFlag == true)) {
		for (var i=0; i<changeImages.arguments.length; i+=2) {
			document[changeImages.arguments[i]].src = changeImages.arguments[i+1];
		}
	}
}

var preloadFlag = false;
function preloadImages() {
	if (document.images) {
		Music_algorithms_over = newImage("images/Music-algorithms-over.jpg");
		Interfaces_over = newImage("images/Interfaces-over.jpg");
		Programming_over = newImage("images/Programming-over.jpg");
		Acoustics_over = newImage("images/Acoustics-over.jpg");
		context_over = newImage("images/context-over.jpg");
		audio_over = newImage("images/audio-over.jpg");
		MIDI_over = newImage("images/MIDI-over.jpg");
		preloadFlag = true;
	}
}

// -->
</SCRIPT>
<!-- End Preload Script -->
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}
//-->
</script>
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_reloadPage(init) {  //reloads the window if Nav4 resized
  if (init==true) with (navigator) {if ((appName=="Netscape")&&(parseInt(appVersion)==4)) {
    document.MM_pgW=innerWidth; document.MM_pgH=innerHeight; onresize=MM_reloadPage; }}
  else if (innerWidth!=document.MM_pgW || innerHeight!=document.MM_pgH) location.reload();
}
MM_reloadPage(true);

function MM_nbGroup(event, grpName) { //v6.0
  var i,img,nbArr,args=MM_nbGroup.arguments;
  if (event == "init" && args.length > 2) {
    if ((img = MM_findObj(args[2])) != null && !img.MM_init) {
      img.MM_init = true; img.MM_up = args[3]; img.MM_dn = img.src;
      if ((nbArr = document[grpName]) == null) nbArr = document[grpName] = new Array();
      nbArr[nbArr.length] = img;
      for (i=4; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
        if (!img.MM_up) img.MM_up = img.src;
        img.src = img.MM_dn = args[i+1];
        nbArr[nbArr.length] = img;
    } }
  } else if (event == "over") {
    document.MM_nbOver = nbArr = new Array();
    for (i=1; i < args.length-1; i+=3) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = (img.MM_dn && args[i+2]) ? args[i+2] : ((args[i+1])? args[i+1] : img.MM_up);
      nbArr[nbArr.length] = img;
    }
  } else if (event == "out" ) {
    for (i=0; i < document.MM_nbOver.length; i++) {
      img = document.MM_nbOver[i]; img.src = (img.MM_dn) ? img.MM_dn : img.MM_up; }
  } else if (event == "down") {
    nbArr = document[grpName];
    if (nbArr)
      for (i=0; i < nbArr.length; i++) { img=nbArr[i]; img.src = img.MM_up; img.MM_dn = 0; }
    document[grpName] = nbArr = new Array();
    for (i=2; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = img.MM_dn = (args[i+1])? args[i+1] : img.MM_up;
      nbArr[nbArr.length] = img;
  } }
}
//-->
</script>
<link href="../../style/main.css" rel="stylesheet" type="text/css">
<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->
</head>
<body leftmargin="3" topmargin="3" marginwidth="0" marginheight="0"  onLoad="MM_preloadImages('../../images/banner/audio-over.jpg','../../images/banner/MIDI-over.jpg','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Interfaces-over.jpg','../../images/banner/Programming-over.jpg','../../images/banner/Acoustics-over.jpg','../../images/banner/context-over.jpg','../../images/banner/banner_08.gif')">
<table width="691" border="0" align="center">
  <tr> 
    <td colspan="5" align="left"> <div align="center"> 
        <table border="0" align="left" cellpadding="0" cellspacing="0">
          <tr> 
            <td colspan="8"><img src="../../images/banner.jpg" alt="" width=758 height=57 border="0" usemap="#Map5"></td>
          </tr>
          <tr> 
            <td width="50"><a href="../../Audio/audio.htm" target="_top" onClick="MM_nbGroup('down','group1','Audio','../../images/banner/audio-over.jpg',1)" onMouseOver="MM_nbGroup('over','Audio','../../images/banner/audio-over.jpg','../../images/banner/audio-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/audio.jpg" alt="audio" name="Audio" width="50" height="24" border="0" onload=""></a></td>
            <td width="47"><a href="../../midi/midi.htm" target="_top" onClick="MM_nbGroup('down','group1','MIDI','../../images/banner/MIDI-over.jpg',1)" onMouseOver="MM_nbGroup('over','MIDI','../../images/banner/MIDI-over.jpg','../../images/banner/MIDI-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/MIDI.jpg" alt="MIDI" name="MIDI" width="47" height="24" border="0" onload=""></a></td>
            <td width="117"><a href="../../musalgo/musalgo.htm" target="_top" onClick="MM_nbGroup('down','group1','musalgorithms','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOver="MM_nbGroup('over','musalgorithms','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Music-algorithms.jpg" alt="Music Algorithms" name="musalgorithms" width="117" height="24" border="0" onload=""></a></td>
            <td width="88"><a href="../../interfaces/interface.htm" target="_top" onClick="MM_nbGroup('down','group1','Interfaces','../../images/banner/Interfaces-over.jpg',1)" onMouseOver="MM_nbGroup('over','Interfaces','../../images/banner/Interfaces-over.jpg','../../images/banner/Interfaces-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Interfaces.jpg" alt="Interfaces" name="Interfaces" width="88" height="24" border="0" onload=""></a></td>
            <td width="103"><a href="../../programming/programming.htm" target="_top" onClick="MM_nbGroup('down','group1','Programming','../../images/banner/Programming-over.jpg',1)" onMouseOver="MM_nbGroup('over','Programming','../../images/banner/Programming-over.jpg','../../images/banner/Programming-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Programming.jpg" alt="Programming" name="Programming" width="103" height="24" border="0" onload=""></a></td>
            <td width="81"><a href="../../acoustics/acoustics.htm" target="_top" onClick="MM_nbGroup('down','group1','Acoustics','../../images/banner/Acoustics-over.jpg',1)" onMouseOver="MM_nbGroup('over','Acoustics','../../images/banner/Acoustics-over.jpg','../../images/banner/Acoustics-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Acoustics.jpg" alt="Acoustics" name="Acoustics" width="81" height="24" border="0" onload=""></a></td>
            <td width="100"><a href="../../context/context.htm" target="_top" onClick="MM_nbGroup('down','group1','Context','../../images/banner/context-over.jpg',1)" onMouseOver="MM_nbGroup('over','Context','../../images/banner/context-over.jpg','../../images/banner/context-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/context.jpg" alt="Context" name="Context" width="100" height="24" border="0" onload=""></a></td>
            <td width="156"><img src="../../images/banner/banner_09.gif" width="172" height="24"></td>
          </tr>
        </table>
      </div></td>
  </tr>
  <tr> 
    <td width="3" align="left"> <div align="right"></div>
      <div align="right"></div>
      <div align="right"></div></td>
    <!-- InstanceBeginEditable name="tracker" -->
    <td height="16" colspan="2" rowspan="2" align="left"><a href="../../interfaces/interface.htm">&gt; 
      Interface </a>&gt; <a href="../../interfaces/guiconst.htm">GUI construction 
      </a> &gt;<a href="jm550d.html"> JM-550 Drum Machine: AWT List</a></td>
    <!-- InstanceEndEditable -->
    <td width="15" rowspan="2" align="left">&nbsp;</td>
    <td width="214" rowspan="2" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="3" rowspan="3" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="66" align="left" valign="top">&nbsp;</td>
    <td width="444" align="left" valign="top">&nbsp;</td>
    <td colspan="2" align="left" valign="top"><strong></strong></td>
  </tr>
  <tr> <!-- InstanceBeginEditable name="content" --> 
    <td colspan="4" rowspan="3" align="left" valign="top"> <h2>JM-550 Drum Machine: 
        AWT List </h2>
      <p>This series of classes introduces a simple, but extendible, drum machine 
        program. <br>
        There are a series of tutorials about the jm-550 classes (influenced by 
        the drum patterns of the Boss DR-550 drum machine) which show the development 
        of a Java graphical user interface for a jMusic application.<br>
        <br>
        The <a href="jm550a.html">first tutorial</a> looked at the application 
        without any GUI code, in the <a href="jm550b.html">second</a> tutorial 
        some simple start and stop buttons were displayed in a window frame. In 
        the <a
 href="jm550c.html">third</a> tutorial sliders were added to control tempo and 
        volume, and in this tutorial a list of drum patterns is added. So here 
        goes...</p>
      <p>This tutorial introduces the AWT (Abstract 
        Windowing Toolkit) List class.</p>
      <p>Here is the GUI generated by this program:</p>
      <div align="left"><img src="Images/jm-550d.gif" alt="GUI"
 width="311" height="242"
 align="bottom" x-sas-useimagewidth="" x-sas-useimageheight=""> </div>
      <p>This tutorial concerns the class JM550d</p>
      <p><a href="../jmdemos/JM550d.java"
 target="_top">Click here to view the source.</a> </p>
      <p>There are three other classes required for this tutorial, <br>
        the <a
 href="../jmdemos/Basic_550.java">Basic_550</a> and <a
 href="../jmdemos/EightBeat1.java">EightBeat1</a> classes (download and compile 
        if you don't already have them from a <a href="jm550a.html">previous</a> 
        tutorial) <br>
        and the <a
 href="../jmdemos/EightBeat1FillIn.java">EightBeat1FillIn</a> class, to provide 
        a second pattern class so you can hear the change when selecting one from 
        the list.</p>
      <p>Lets have a closer look. </p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>import jm.JMC;<br>import jm.music.data.*;<br>import jm.music.tools.*;<br>import jm.util.*;<br>import java.awt.*;<br>import java.awt.event.*;</pre> 
            </td>
          </tr>
        </tbody>
      </table>
      <p></p>
      <p>In order to use the AWT classes we need to 
        import two packages: java.awt.*; and java.awt.event.*; The 
        awt package has the classes for windows buttons and so on, and the awt.event 
        package has classes for handling mouse clicks on the buttons, movement 
        of the sliders, and so on.</p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>public class JM550d extends Frame implements JMC, <br>    ActionListener, AdjustmentListener, ItemListener {<br>    private static Button start, stop;<br>    private static Scrollbar tempoSlider, volumeSlider;<br>    private static Label tempoValue, volumeValue;<br>    private static List patterns;<br>    private static Basic_550 pat;<br>    <br>    public static void main(String[] args) {<br>        new JM550d();<span  class = "comment">
        // pattern</span>
        pat = new EightBeat1();<span  class = "comment">
        // play</span>
        Play.midiCycle(pat.getScore());
    }</pre> </td>
          </tr>
        </tbody>
      </table>
      <p></p>
      <p>The new addition to the class declaration is the implementation of the 
        ItemListener interface.<br>
        This is the listener used by the awt List class. You should now see the 
        pattern of connection between GUI interface components and listener interfaces.<br>
        It is that different GUI components that can respond to user actions (using 
        mouse, keyboard, etc.) have associated listener interfaces that handle 
        actions upon them. For example, Buttons use the ActionListener, ScrollBars 
        use the AdjustmentListener, and Lists use the ItemListener.<br>
        To use a listener interface your class implements it in the class declaration 
        and you provide the associated method - in the case of the ItemListener 
        this is the <font face="Courier New, Courier, mono">itemStateChanged() 
        </font>method - see below.</p>
      <p>The main method here is identical to previous 
        incarnations of the JM550 class.</p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>    public JM550d() {<br>        super("JM-550 Drum Machine");<br>        <span  class = "comment">
        // create transport panel</span>
        Panel transport = new Panel();
        
        start = new Button("Play");
        start.addActionListener(this);
        transport.add(start);
        
        stop = new Button("Stop");
        stop.addActionListener(this);
        transport.add(stop);
        
        this.add(transport, "South");
        <span  class = "comment">
        // Tempo panel</span>
        Panel tempoPanel = new Panel();
        tempoPanel.setLayout(new BorderLayout());
       
        Label tempoLabel = new Label("Tempo", Label.CENTER);
        tempoPanel.add(tempoLabel, "North");
&nbsp;<span  class = "comment">
        // Scrollbar arguments - orientation, initial value, </span><br> <span  class = "comment">	// visible amount, min, max</span>
        tempoSlider = new Scrollbar(<br>		Scrollbar.VERTICAL, 250 - 130, 20, 0, 250);<br>        tempoSlider.addAdjustmentListener(this);<br>        tempoPanel.add("Center", tempoSlider);<br>        tempoValue = new Label("130", Label.CENTER);<br>        tempoPanel.add(tempoValue, "South");<br>        <br>        this.add(tempoPanel, "West");<br>        <span  class = "comment">
        // volume slider
        // Tempo panel</span>
        Panel volumePanel = new Panel();
        volumePanel.setLayout(new BorderLayout());
       
        Label volumeLabel = new Label("Volume", Label.CENTER);
        volumePanel.add(volumeLabel, "North");
&nbsp;<span  class = "comment">
        // Scrollbar arguments - orientation, initial value, <br>  	   // visible amount, min, max</span>
        volumeSlider = new Scrollbar(<br>		Scrollbar.VERTICAL, 3, 1, 0, 10);<br>        volumeSlider.addAdjustmentListener(this);<br>        volumePanel.add("Center", volumeSlider);<br>        volumeValue = new Label("100", Label.CENTER);<br>        volumePanel.add(volumeValue, "South");<br>        <br>        this.add(volumePanel, "East");</pre> </td>
          </tr>
        </tbody>
      </table>
      <p></p>
      <p>In the constructor all the GUI components are added. As these tutorials 
        have proceeded we have more and more code relating to the GUI.<br>
        Above is the code so far, repeated for your convenience, and below is 
        the new code for the List.<br>
        As you can see writing the GUI can be more complex, time consuming and 
        code dense than the actual workings of the jMusic composition.</p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre><span  class = "comment">        // pattern list</span>
        patterns = new List(5); <span  class = "comment">// how many visible rows</span>
        patterns.addItemListener(this);
&nbsp;
        patterns.add("EightBeat1");
        patterns.add("EightBeat1Fill");
        patterns.select(0);
        
        this.add(patterns, "Center");
      <span  class = "comment">
        //this.pack();</span>
        this.setVisible(true);
    }</pre> </td>
          </tr>
        </tbody>
      </table>
      <p></p>
      <p>Adding the List component follows similar steps to the other GUI components. 
        First we declare a new List instance called patterns. <br>
        We register it with the ItemListener using its addItemListener() method. 
        The word 'this' passed to that method indicates that the place to look 
        for the associated itemStateChanged() method is in 'this' class.</p>
      <p>We then add two items to the list, these are simply Strings (text names) 
        with which we will later associate the pattern instances.<br>
        These Strings will appear in out list - they should be human readable 
        and have sensible names.<br>
        Next we tell the List instance to start out with the zeroith item in the 
        list selected.</p>
      <p>The List is added to the frame in the centre 
        area of its border layout.</p>
      <p>Finally, the frame is made visible.</p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre><span  class = "comment">    // deal with button clicks</span>
    public void actionPerformed(ActionEvent ae) {
        if (ae.getSource() == start) player.resumePlayback();
        if (ae.getSource() == stop) player.suspendPlayback(); 
    }
    <span  class = "comment">
    // deal with slider movements</span>
    public void adjustmentValueChanged(AdjustmentEvent ae) {<span  class = "comment">
        // tempo</span>
        if (ae.getSource() == tempoSlider) {
            int value = 250 - tempoSlider.getValue();
            tempoValue.setText(Integer.toString(value));
            pat.setTempo(value);
        }<span  class = "comment">
        // volume</span>
        if (ae.getSource() == volumeSlider) {
            int value = 12 * (10 - volumeSlider.getValue());
            volumeValue.setText(Integer.toString(value));
            pat.setScoreVolume(value);
            pat.changeDynamics();
        }
    }</pre> </td>
          </tr>
        </tbody>
      </table>
      <p></p>
      <p>The methods for handling the button clicks 
        and scroll bar movements are shown above - details about these is covered 
        in previous tutorials. </p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre><span  class = "comment">    // deal with list selections</span>
    public void itemStateChanged(ItemEvent ie) {
        if (ie.getSource() == patterns) {
            int selected = patterns.getSelectedIndex();
            if (selected == 0) pat = new EightBeat1();
            if (selected == 1) pat = new EightBeat1FillIn();
        }
    }
}</pre> </td>
          </tr>
        </tbody>
      </table>
      <p></p>
      <p>The itemStateChanged() method is called each time the user selects and 
        item in the list.<br>
        When this occurs the listener passes an ItemEvent object containing all 
        the details of the action to this method. We first check to see that the 
        message is from the patterns List (of course there is no other list in 
        this class but we're being thorough).<br>
        <br>
        If so, an integer variable called 'selected' is declared and given the 
        number of the selected list item (0, 1, 2, 3, ...). We have only two items 
        currently so the value will be 0, 1, or -1 if no item is selected.</p>
      <p>We handle each case separately. If the value 
        is 0 then the first item was selected, the EightBeat1 pattern, and so 
        we set our classes current pattern, pat, to a new instance of the EightBeat1 
        class. Similarly if the list index is 1 we change to a new EightBeat1FillIn 
        object. &nbsp;Since this is the same reference the Play class is holding, 
        the next time it goes to play a bar (or measure) the new pattern will 
        be heard.</p>
      <p></p>
      <p></p>
      <p>You might try making new drum pattern classes 
        and adding them to the list.&nbsp; </p>
     
      </td>
    <!-- InstanceEndEditable --></tr>
  <tr> 
    <td align="left"> <div align="left"></div></td>
  </tr>
  <tr> 
    <td align="left">&nbsp;</td>
  </tr>
</table>
<blockquote> 
  <p name="Map"> 
    <map name="Map">
      <area shape="rect" coords="4,4,41,29" href="http://jmusic.ci.qut.edu" target="_blank" alt="jMusic">
      <area shape="rect" coords="43,5,80,31" href="http://www.ozco.gov.au" target="_blank" alt="Australia Council">
      <area shape="rect" coords="83,4,108,29" href="http://www.qut.com" target="_blank" alt="Queensland University of Technology">
    </map>
    <map name="Map2">
      <area shape="rect" coords="702,1,758,12" href="../../extras/sitemap.html" target="_self" alt="Sitemap">
      <area shape="rect" coords="629,1,687,12" href="../../extras/contact.html" target="_self" alt="Contact">
      <area shape="rect" coords="574,1,615,14" href="../../index.html" target="_self" alt="Home">
    </map>
    <map name="Map3">
      <area shape="rect" coords="553,5,601,18" href="#" alt="Home">
      <area shape="rect" coords="612,4,671,18" href="#">
      <area shape="rect" coords="683,3,735,19" href="#">
      <area shape="rect" coords="9,8,227,59" href="#" target="index.html">
    </map>
    <map name="Map4">
      <area shape="rect" coords="6,9,40,41" href="http://www.qut.com" target="_blank" alt="http://www.qut.com">
      <area shape="rect" coords="44,14,87,42" href="http://explodingart.com/jmusic" target="_blank" alt="http://explodingart.com/jmusic">
      <area shape="rect" coords="90,9,138,43" href="http://www.ozco.gov.au" target="_parent" alt="http://www.ozco.gov.au">
      <area shape="rect" coords="313,13,512,36" href="../../contact.html">
    </map>
  </p>
</blockquote>
<map name="Map5">
  <area shape="rect" coords="-7,4,228,51" href="../../index.htm" target="_self" alt="Digital Instrument making">
  <area shape="rect" coords="599,1,658,18" href="../../index.htm" alt="Home">
  <area shape="rect" coords="677,3,755,18" href="../../extras/contact.htm" target="extras">
</map>
</body>
<!-- InstanceEnd --></html>
