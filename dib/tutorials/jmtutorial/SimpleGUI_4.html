<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><!-- InstanceBegin template="/Templates/tutorial files.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<!-- InstanceBeginEditable name="doctitle" -->
<title>Digital Instrument Building</title>
<!-- InstanceEndEditable --> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<META NAME="DC.Creator" CONTENT="PersonalName= Andrew R. Brown  ">
<META NAME="DC.Creator.Email" CONTENT="algorithmicmusic@gmail.com,">
<META NAME="DC.Rights" CONTENT="Andrew R. Brown ">
<META NAME="DC.Title" CONTENT="Digital Instrument Building - Music software development with jMusic">
<META NAME="DC.Title.Alternative" content ="Music software development with jMusic">
<META NAME="DC.Subject" CONTENT="music, java, composition, algorithmic, digital music, generative music, instrument building, music analysing software development, Australia">
<META NAME="DC.Description" CONTENT="This site is a tutorial resource designed to assist in the training and self education of up-and-coming digital instrument developers. The tutorials cover topics including music software design, audio synthesis, digital signal processing, compositional systems, and computer programming concepts. ">
<META NAME="DC.Language" SCHEME="rfc1766" CONTENT="en-au">
<META NAME="DC.Audience" CONTENT="All">
<META NAME="DC.Date.Created" CONTENT="06-04-2003">
<META NAME="DC.Availability" CONTENT="PersonalName= Andrew R. Brown; email= algorithmicmusic@gmail.com">
<!-- ImageReady Preload Script (menubanner2.psd) -->
<SCRIPT TYPE="text/javascript">
<!--

function newImage(arg) {
	if (document.images) {
		rslt = new Image();
		rslt.src = arg;
		return rslt;
	}
}

function changeImages() {
	if (document.images && (preloadFlag == true)) {
		for (var i=0; i<changeImages.arguments.length; i+=2) {
			document[changeImages.arguments[i]].src = changeImages.arguments[i+1];
		}
	}
}

var preloadFlag = false;
function preloadImages() {
	if (document.images) {
		Music_algorithms_over = newImage("images/Music-algorithms-over.jpg");
		Interfaces_over = newImage("images/Interfaces-over.jpg");
		Programming_over = newImage("images/Programming-over.jpg");
		Acoustics_over = newImage("images/Acoustics-over.jpg");
		context_over = newImage("images/context-over.jpg");
		audio_over = newImage("images/audio-over.jpg");
		MIDI_over = newImage("images/MIDI-over.jpg");
		preloadFlag = true;
	}
}

// -->
</SCRIPT>
<!-- End Preload Script -->
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}
//-->
</script>
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_reloadPage(init) {  //reloads the window if Nav4 resized
  if (init==true) with (navigator) {if ((appName=="Netscape")&&(parseInt(appVersion)==4)) {
    document.MM_pgW=innerWidth; document.MM_pgH=innerHeight; onresize=MM_reloadPage; }}
  else if (innerWidth!=document.MM_pgW || innerHeight!=document.MM_pgH) location.reload();
}
MM_reloadPage(true);

function MM_nbGroup(event, grpName) { //v6.0
  var i,img,nbArr,args=MM_nbGroup.arguments;
  if (event == "init" && args.length > 2) {
    if ((img = MM_findObj(args[2])) != null && !img.MM_init) {
      img.MM_init = true; img.MM_up = args[3]; img.MM_dn = img.src;
      if ((nbArr = document[grpName]) == null) nbArr = document[grpName] = new Array();
      nbArr[nbArr.length] = img;
      for (i=4; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
        if (!img.MM_up) img.MM_up = img.src;
        img.src = img.MM_dn = args[i+1];
        nbArr[nbArr.length] = img;
    } }
  } else if (event == "over") {
    document.MM_nbOver = nbArr = new Array();
    for (i=1; i < args.length-1; i+=3) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = (img.MM_dn && args[i+2]) ? args[i+2] : ((args[i+1])? args[i+1] : img.MM_up);
      nbArr[nbArr.length] = img;
    }
  } else if (event == "out" ) {
    for (i=0; i < document.MM_nbOver.length; i++) {
      img = document.MM_nbOver[i]; img.src = (img.MM_dn) ? img.MM_dn : img.MM_up; }
  } else if (event == "down") {
    nbArr = document[grpName];
    if (nbArr)
      for (i=0; i < nbArr.length; i++) { img=nbArr[i]; img.src = img.MM_up; img.MM_dn = 0; }
    document[grpName] = nbArr = new Array();
    for (i=2; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = img.MM_dn = (args[i+1])? args[i+1] : img.MM_up;
      nbArr[nbArr.length] = img;
  } }
}
//-->
</script>
<link href="../../style/main.css" rel="stylesheet" type="text/css">
<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->
</head>
<body leftmargin="3" topmargin="3" marginwidth="0" marginheight="0"  onLoad="MM_preloadImages('../../images/banner/audio-over.jpg','../../images/banner/MIDI-over.jpg','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Interfaces-over.jpg','../../images/banner/Programming-over.jpg','../../images/banner/Acoustics-over.jpg','../../images/banner/context-over.jpg','../../images/banner/banner_08.gif')">
<table width="691" border="0" align="center">
  <tr> 
    <td colspan="5" align="left"> <div align="center"> 
        <table border="0" align="left" cellpadding="0" cellspacing="0">
          <tr> 
            <td colspan="8"><img src="../../images/banner.jpg" alt="" width=758 height=57 border="0" usemap="#Map5"></td>
          </tr>
          <tr> 
            <td width="50"><a href="../../Audio/audio.htm" target="_top" onClick="MM_nbGroup('down','group1','Audio','../../images/banner/audio-over.jpg',1)" onMouseOver="MM_nbGroup('over','Audio','../../images/banner/audio-over.jpg','../../images/banner/audio-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/audio.jpg" alt="audio" name="Audio" width="50" height="24" border="0" onload=""></a></td>
            <td width="47"><a href="../../midi/midi.htm" target="_top" onClick="MM_nbGroup('down','group1','MIDI','../../images/banner/MIDI-over.jpg',1)" onMouseOver="MM_nbGroup('over','MIDI','../../images/banner/MIDI-over.jpg','../../images/banner/MIDI-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/MIDI.jpg" alt="MIDI" name="MIDI" width="47" height="24" border="0" onload=""></a></td>
            <td width="117"><a href="../../musalgo/musalgo.htm" target="_top" onClick="MM_nbGroup('down','group1','musalgorithms','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOver="MM_nbGroup('over','musalgorithms','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Music-algorithms.jpg" alt="Music Algorithms" name="musalgorithms" width="117" height="24" border="0" onload=""></a></td>
            <td width="88"><a href="../../interfaces/interface.htm" target="_top" onClick="MM_nbGroup('down','group1','Interfaces','../../images/banner/Interfaces-over.jpg',1)" onMouseOver="MM_nbGroup('over','Interfaces','../../images/banner/Interfaces-over.jpg','../../images/banner/Interfaces-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Interfaces.jpg" alt="Interfaces" name="Interfaces" width="88" height="24" border="0" onload=""></a></td>
            <td width="103"><a href="../../programming/programming.htm" target="_top" onClick="MM_nbGroup('down','group1','Programming','../../images/banner/Programming-over.jpg',1)" onMouseOver="MM_nbGroup('over','Programming','../../images/banner/Programming-over.jpg','../../images/banner/Programming-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Programming.jpg" alt="Programming" name="Programming" width="103" height="24" border="0" onload=""></a></td>
            <td width="81"><a href="../../acoustics/acoustics.htm" target="_top" onClick="MM_nbGroup('down','group1','Acoustics','../../images/banner/Acoustics-over.jpg',1)" onMouseOver="MM_nbGroup('over','Acoustics','../../images/banner/Acoustics-over.jpg','../../images/banner/Acoustics-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Acoustics.jpg" alt="Acoustics" name="Acoustics" width="81" height="24" border="0" onload=""></a></td>
            <td width="100"><a href="../../context/context.htm" target="_top" onClick="MM_nbGroup('down','group1','Context','../../images/banner/context-over.jpg',1)" onMouseOver="MM_nbGroup('over','Context','../../images/banner/context-over.jpg','../../images/banner/context-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/context.jpg" alt="Context" name="Context" width="100" height="24" border="0" onload=""></a></td>
            <td width="156"><img src="../../images/banner/banner_09.gif" width="172" height="24"></td>
          </tr>
        </table>
      </div></td>
  </tr>
  <tr> 
    <td width="3" align="left"> <div align="right"></div>
      <div align="right"></div>
      <div align="right"></div></td>
    <!-- InstanceBeginEditable name="tracker" -->
    <td height="16" colspan="2" rowspan="2"><a href="../../interfaces/interface.htm">&gt; 
      Interface </a>&gt; <a href="../../interfaces/guiconst.htm">GUI construction 
      </a> &gt;<a href="Markov0.html"> </a><a href="SimpleGUI_4.html">Graphical 
      User Interface - Stage 4 </a> </td>
    <!-- InstanceEndEditable -->
    <td width="15" rowspan="2" align="left">&nbsp;</td>
    <td width="214" rowspan="2" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="3" rowspan="3" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="66" align="left" valign="top">&nbsp;</td>
    <td width="444" align="left" valign="top">&nbsp;</td>
    <td colspan="2" align="left" valign="top"><strong></strong></td>
  </tr>
  <tr> <!-- InstanceBeginEditable name="content" --> 
    <td colspan="4" rowspan="3" align="left" valign="top"> <h2>Graphical User 
        Interface - Stage 4 </h2>
      <p>This fourth stage of the GUI development on top of jMusic 
        utilises dialog saving routines from the native OS and enables scores 
        to be viewed with the jMusic ShowScore tool. This creates an environment 
        which, apart from composing the scores, makes a quite productive working 
        context where parameters can be changed, results seen, and files saved 
        when a worthwhile 'take' arises.</p>
      <p>You may even want to make use of the command: Play.midi(score), 
        so that you can hear your compositions immediately.</p>
      <p class="c5"><a class="c4"
 href="../jmdemos/SimpleGUI4.java" target="_top">Click here to view source.</a></p>
      <p>The GUI will look similar to this:</p>
      <div class="c6" style="text-align: center;">
        <div align="left"><img
 src="Images/GUI_4.gif" alt="GUI" width="402"
 height="177"
 align="bottom" x-sas-useimagewidth="" x-sas-useimageheight=""></div>
      </div>
      <br> <p>Let's have a closer look.</p>
      <table border="0"
 style="width: 100%; background-color: rgb(224, 224, 224); text-align: left; margin-left: auto; margin-right: auto;">
        <tbody>
          <tr> 
            <td> <pre><span class="comment">//==========================================================<br>//File:                 SimpleGUIApp4.java<br>//Function:             Demonstartes GUI passing of numerical args <br>//                      to a jMusic program and window closing<br>//                      with file saving via dialog boxes, <br>//                             and display of scores in ShowScore windows.<br>//Author:               Andrew R. Brown<br>//Environment           JDK1.1.7<br>//============================================================</span><br>import java.awt.*;<br>import java.awt.event.*;<br>import jm.JMC;<br>import jm.music.data.*;<br>import jm.util.*;<br>import jm.music.tools.*;<br> <br> <br>public class SimpleGUI4 extends Frame implements ActionListener, WindowListener, JMC{<br><span
 class="comment">        //--------------</span><br>	<span class="comment">// Attributes shared within the class</span><br>	<span class="comment">//--------------	</span>TextField minPitch;<br>	TextField maxPitch;<br>	TextField numOfNotes;<br>	FileDialog fd;<br>	Score s = new Score("JMDemo - SimpleGUI_4");<br>     	Button composeBtn, showBtn, saveBtn;<br><span
 class="comment">        //--------------</span><br><span class="comment">        // simple main method called when the class in run</span><br>        <span class="comment">//--------------	</span><br>	public static void main(String[] args) {<br>	       new SimpleGUI4();<br>	}<br>        <span class="comment">//--------------</span><br>	<span class="comment">// constructor</span><br>	<span class="comment">//--------------	</span><br>	public SimpleGUI4() {<span class="comment">	       <br>		//give the window a name	       </span><br>		super("An even more real Application 4");<br> <span
 class="comment">	       	//register the closebox event	       </span><br>		this.addWindowListener(this);<br> <span
 class="comment">	       	//set the layout for the Frame	       </span><br>		this.setLayout(new GridLayout(5, 2, 5, 0));<br> <span
 class="comment">	       	//add the components	       </span><br>		Label minPL = new Label("Minimum MIDI Pitch", Label.RIGHT);<br>		this.add(minPL);<br>		<br>		minPitch = new TextField("50");<br>		this.add(minPitch);<br>		<br>		Label maxPL = new Label("Maximun MIDI Pitch", Label.RIGHT);<br>		this.add(maxPL);<br>		<br>		maxPitch = new TextField("70");<br>		this.add(maxPitch);<br>		<br>		Label numNL = new Label("Number of notes", Label.RIGHT);<br>		this.add(numNL);<br>		<br>		numOfNotes = new TextField("12");<br>		this.add(numOfNotes);<br>		<br>		Label dummy = new Label("", Label.RIGHT);<br>		this.add(dummy);<br><br> <span class="comment">	    	//create a panel to put the button on</span><br>	       	<span class="comment">// so it doesn't fill the grid space </span><br>	       	Panel p = new Panel();<br><br>&nbsp;<span
 class="comment">	       	//add the buttons	       </span><br>		composeBtn = new Button("Compose");<br>	       	composeBtn.addActionListener(this);<br>	       	composeBtn.setActionCommand("Create");<br>	       	p.add(composeBtn);<br>	       	<br>	       	showBtn = new Button("Display");<br>	       	showBtn.addActionListener(this);<br>	       	showBtn.setActionCommand("Display");<br>	       	p.add(showBtn);<br> 	<br>	       	saveBtn = new Button("Save");<br>	       	saveBtn.addActionListener(this);<br>	       	saveBtn.setActionCommand("Save");<br>	       	p.add(saveBtn);<br> <span
 class="comment">	       	<br>		//put the panel in the frame</span>	       <br>		this.add(p);<br> <span class="comment">	       	<br>		//display the window	       </span><br>		this.pack();                                                    <br>	       	this.show();<br>	}<span
 class="comment">	<br>	<br>	//--------------</span><br><span class="comment">	// Class Methods</span><br><span class="comment">	//--------------</span><br> <br><span class="comment">	// Deal with the window closebox</span>	<br>	public void windowClosing(WindowEvent we) {<br>	       System.exit(0);<br>	} <span
 class="comment"><br>	<br>	//other WindowListener interface methods</span><br>	<span class="comment">//They do nothing but are required to be present</span>	<br>	public void windowActivated(WindowEvent we) {};<br>	public void windowClosed(WindowEvent we) {};<br>	public void windowDeactivated(WindowEvent we) {};<br>	public void windowIconified(WindowEvent we) {};<br>	public void windowDeiconified(WindowEvent we) {};<br>	public void windowOpened(WindowEvent we) {};<br> <span
 class="comment"><br>	// Deal with the button clicks</span>	<br>	public void actionPerformed(ActionEvent ae) {<br>		if (ae.getSource() == composeBtn) {<br>	       		makeMusic(Integer.valueOf(minPitch.getText()).intValue(), <br>	                          Integer.valueOf(maxPitch.getText()).intValue(), <br>	                          Integer.valueOf(numOfNotes.getText()).intValue());<br>	       } <br>	       if (ae.getSource() == saveBtn) {<br>	               fd = new FileDialog(this, "Save jMusic MIDI file as...",<br>					   FileDialog.SAVE);<br>	               fd.show();<br>	               if (fd.getFile() != null) { <span
 class="comment">//catch a cancel command</span><br>	                       <span class="comment">	//write a MIDI file to disk	</span>                       <br>				Write.midi(s, fd.getDirectory()+fd.getFile());<br>	       }<br>	       if (ae.getSource() == showBtn) {<br>	               View.show(s,10,170);<br>	       }<br>	}<br><span
 class="comment">        //--------------</span><br><span class="comment">        // The code that creates the jMusic score </span><br> <span class="comment">	// and writes it as MIDI and jm files.</span><br> <span class="comment">	//--------------</span>	<br>	public void makeMusic(int minPitchVal, int maxPitchVal, int numOfNotesVal) {<br>	       	s.empty(); <span
 class="comment">//empty the score first	       </span><br>		Part p = new Part("Piano", 1, 0);<br>	       	Phrase phr = new Phrase(0.0); <span
 class="comment">	       <br>		// the serious bit :) alter as desired	       </span><br>		for(short i=0;i&lt;numOfNotesVal;i++){<br>	               	Note n = new Note((int)((Math.random()*<br>						 Math.abs(maxPitchVal-minPitchVal))+<br>							  minPitchVal), C);<br>	        	phr.addNote(n);<br>	       	}<br>	       	p.addPhrase(phr);<br>	       	s.addPart(p);<span
 class="comment">	       <br>		//beep when done	       </span><br>		Toolkit.getDefaultToolkit().beep();<br>	}<br>}<br> <br><br></pre> </td>
          </tr>
        </tbody>
      </table>
      To be continued... <br>
      There is nothing new in this class from earliuer GUI tutorials, it's just 
      all in one place which makes it look long. <br>
      Take your time and work through the code slowly to see what's going on.<br> 
      <br>
      <p>Importantly notice that the actionPerformed method handles events generated 
        by all of the three buttons.<br>
        First it checks which button was the source of the event, then proceeds 
        appropriatly.</p>
 
      </td>
    <!-- InstanceEndEditable --></tr>
  <tr> 
    <td align="left"> <div align="left"></div></td>
  </tr>
  <tr> 
    <td align="left">&nbsp;</td>
  </tr>
</table>
<blockquote> 
  <p name="Map"> 
    <map name="Map">
      <area shape="rect" coords="4,4,41,29" href="http://jmusic.ci.qut.edu" target="_blank" alt="jMusic">
      <area shape="rect" coords="43,5,80,31" href="http://www.ozco.gov.au" target="_blank" alt="Australia Council">
      <area shape="rect" coords="83,4,108,29" href="http://www.qut.com" target="_blank" alt="Queensland University of Technology">
    </map>
    <map name="Map2">
      <area shape="rect" coords="702,1,758,12" href="../../extras/sitemap.html" target="_self" alt="Sitemap">
      <area shape="rect" coords="629,1,687,12" href="../../extras/contact.html" target="_self" alt="Contact">
      <area shape="rect" coords="574,1,615,14" href="../../index.html" target="_self" alt="Home">
    </map>
    <map name="Map3">
      <area shape="rect" coords="553,5,601,18" href="#" alt="Home">
      <area shape="rect" coords="612,4,671,18" href="#">
      <area shape="rect" coords="683,3,735,19" href="#">
      <area shape="rect" coords="9,8,227,59" href="#" target="index.html">
    </map>
    <map name="Map4">
      <area shape="rect" coords="6,9,40,41" href="http://www.qut.com" target="_blank" alt="http://www.qut.com">
      <area shape="rect" coords="44,14,87,42" href="http://explodingart.com/jmusic" target="_blank" alt="http://explodingart.com/jmusic">
      <area shape="rect" coords="90,9,138,43" href="http://www.ozco.gov.au" target="_parent" alt="http://www.ozco.gov.au">
      <area shape="rect" coords="313,13,512,36" href="../../contact.html">
    </map>
  </p>
</blockquote>
<map name="Map5">
  <area shape="rect" coords="-7,4,228,51" href="../../index.htm" target="_self" alt="Digital Instrument making">
  <area shape="rect" coords="599,1,658,18" href="../../index.htm" alt="Home">
  <area shape="rect" coords="677,3,755,18" href="../../extras/contact.htm" target="extras">
</map>
</body>
<!-- InstanceEnd --></html>
