<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><!-- InstanceBegin template="/Templates/tutorial files.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<!-- InstanceBeginEditable name="doctitle" --> 
<title>Digital Instrument Building</title>
<!-- InstanceEndEditable --> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<META NAME="DC.Creator" CONTENT="PersonalName= Andrew R. Brown  ">
<META NAME="DC.Creator.Email" CONTENT="algorithmicmusic@gmail.com,">
<META NAME="DC.Rights" CONTENT="Andrew R. Brown ">
<META NAME="DC.Title" CONTENT="Digital Instrument Building - Music software development with jMusic">
<META NAME="DC.Title.Alternative" content ="Music software development with jMusic">
<META NAME="DC.Subject" CONTENT="music, java, composition, algorithmic, digital music, generative music, instrument building, music analysing software development, Australia">
<META NAME="DC.Description" CONTENT="This site is a tutorial resource designed to assist in the training and self education of up-and-coming digital instrument developers. The tutorials cover topics including music software design, audio synthesis, digital signal processing, compositional systems, and computer programming concepts. ">
<META NAME="DC.Language" SCHEME="rfc1766" CONTENT="en-au">
<META NAME="DC.Audience" CONTENT="All">
<META NAME="DC.Date.Created" CONTENT="06-04-2003">
<META NAME="DC.Availability" CONTENT="PersonalName= Andrew R. Brown; email= algorithmicmusic@gmail.com">
<!-- ImageReady Preload Script (menubanner2.psd) -->
<SCRIPT TYPE="text/javascript">
<!--

function newImage(arg) {
	if (document.images) {
		rslt = new Image();
		rslt.src = arg;
		return rslt;
	}
}

function changeImages() {
	if (document.images && (preloadFlag == true)) {
		for (var i=0; i<changeImages.arguments.length; i+=2) {
			document[changeImages.arguments[i]].src = changeImages.arguments[i+1];
		}
	}
}

var preloadFlag = false;
function preloadImages() {
	if (document.images) {
		Music_algorithms_over = newImage("images/Music-algorithms-over.jpg");
		Interfaces_over = newImage("images/Interfaces-over.jpg");
		Programming_over = newImage("images/Programming-over.jpg");
		Acoustics_over = newImage("images/Acoustics-over.jpg");
		context_over = newImage("images/context-over.jpg");
		audio_over = newImage("images/audio-over.jpg");
		MIDI_over = newImage("images/MIDI-over.jpg");
		preloadFlag = true;
	}
}

// -->
</SCRIPT>
<!-- End Preload Script -->
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}
//-->
</script>
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_reloadPage(init) {  //reloads the window if Nav4 resized
  if (init==true) with (navigator) {if ((appName=="Netscape")&&(parseInt(appVersion)==4)) {
    document.MM_pgW=innerWidth; document.MM_pgH=innerHeight; onresize=MM_reloadPage; }}
  else if (innerWidth!=document.MM_pgW || innerHeight!=document.MM_pgH) location.reload();
}
MM_reloadPage(true);

function MM_nbGroup(event, grpName) { //v6.0
  var i,img,nbArr,args=MM_nbGroup.arguments;
  if (event == "init" && args.length > 2) {
    if ((img = MM_findObj(args[2])) != null && !img.MM_init) {
      img.MM_init = true; img.MM_up = args[3]; img.MM_dn = img.src;
      if ((nbArr = document[grpName]) == null) nbArr = document[grpName] = new Array();
      nbArr[nbArr.length] = img;
      for (i=4; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
        if (!img.MM_up) img.MM_up = img.src;
        img.src = img.MM_dn = args[i+1];
        nbArr[nbArr.length] = img;
    } }
  } else if (event == "over") {
    document.MM_nbOver = nbArr = new Array();
    for (i=1; i < args.length-1; i+=3) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = (img.MM_dn && args[i+2]) ? args[i+2] : ((args[i+1])? args[i+1] : img.MM_up);
      nbArr[nbArr.length] = img;
    }
  } else if (event == "out" ) {
    for (i=0; i < document.MM_nbOver.length; i++) {
      img = document.MM_nbOver[i]; img.src = (img.MM_dn) ? img.MM_dn : img.MM_up; }
  } else if (event == "down") {
    nbArr = document[grpName];
    if (nbArr)
      for (i=0; i < nbArr.length; i++) { img=nbArr[i]; img.src = img.MM_up; img.MM_dn = 0; }
    document[grpName] = nbArr = new Array();
    for (i=2; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = img.MM_dn = (args[i+1])? args[i+1] : img.MM_up;
      nbArr[nbArr.length] = img;
  } }
}
//-->
</script>
<link href="../../style/main.css" rel="stylesheet" type="text/css">
<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->
</head>
<body leftmargin="3" topmargin="3" marginwidth="0" marginheight="0"  onLoad="MM_preloadImages('../../images/banner/audio-over.jpg','../../images/banner/MIDI-over.jpg','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Interfaces-over.jpg','../../images/banner/Programming-over.jpg','../../images/banner/Acoustics-over.jpg','../../images/banner/context-over.jpg','../../images/banner/banner_08.gif')">
<table width="691" border="0" align="center">
  <tr> 
    <td colspan="5" align="left"> <div align="center"> 
        <table border="0" align="left" cellpadding="0" cellspacing="0">
          <tr> 
            <td colspan="8"><img src="../../images/banner.jpg" alt="" width=758 height=57 border="0" usemap="#Map5"></td>
          </tr>
          <tr> 
            <td width="50"><a href="../../Audio/audio.htm" target="_top" onClick="MM_nbGroup('down','group1','Audio','../../images/banner/audio-over.jpg',1)" onMouseOver="MM_nbGroup('over','Audio','../../images/banner/audio-over.jpg','../../images/banner/audio-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/audio.jpg" alt="audio" name="Audio" width="50" height="24" border="0" onload=""></a></td>
            <td width="47"><a href="../../midi/midi.htm" target="_top" onClick="MM_nbGroup('down','group1','MIDI','../../images/banner/MIDI-over.jpg',1)" onMouseOver="MM_nbGroup('over','MIDI','../../images/banner/MIDI-over.jpg','../../images/banner/MIDI-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/MIDI.jpg" alt="MIDI" name="MIDI" width="47" height="24" border="0" onload=""></a></td>
            <td width="117"><a href="../../musalgo/musalgo.htm" target="_top" onClick="MM_nbGroup('down','group1','musalgorithms','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOver="MM_nbGroup('over','musalgorithms','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Music-algorithms.jpg" alt="Music Algorithms" name="musalgorithms" width="117" height="24" border="0" onload=""></a></td>
            <td width="88"><a href="../../interfaces/interface.htm" target="_top" onClick="MM_nbGroup('down','group1','Interfaces','../../images/banner/Interfaces-over.jpg',1)" onMouseOver="MM_nbGroup('over','Interfaces','../../images/banner/Interfaces-over.jpg','../../images/banner/Interfaces-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Interfaces.jpg" alt="Interfaces" name="Interfaces" width="88" height="24" border="0" onload=""></a></td>
            <td width="103"><a href="../../programming/programming.htm" target="_top" onClick="MM_nbGroup('down','group1','Programming','../../images/banner/Programming-over.jpg',1)" onMouseOver="MM_nbGroup('over','Programming','../../images/banner/Programming-over.jpg','../../images/banner/Programming-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Programming.jpg" alt="Programming" name="Programming" width="103" height="24" border="0" onload=""></a></td>
            <td width="81"><a href="../../acoustics/acoustics.htm" target="_top" onClick="MM_nbGroup('down','group1','Acoustics','../../images/banner/Acoustics-over.jpg',1)" onMouseOver="MM_nbGroup('over','Acoustics','../../images/banner/Acoustics-over.jpg','../../images/banner/Acoustics-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Acoustics.jpg" alt="Acoustics" name="Acoustics" width="81" height="24" border="0" onload=""></a></td>
            <td width="100"><a href="../../context/context.htm" target="_top" onClick="MM_nbGroup('down','group1','Context','../../images/banner/context-over.jpg',1)" onMouseOver="MM_nbGroup('over','Context','../../images/banner/context-over.jpg','../../images/banner/context-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/context.jpg" alt="Context" name="Context" width="100" height="24" border="0" onload=""></a></td>
            <td width="156"><img src="../../images/banner/banner_09.gif" width="172" height="24"></td>
          </tr>
        </table>
      </div></td>
  </tr>
  <tr> 
    <td width="3" align="left"> <div align="right"></div>
      <div align="right"></div>
      <div align="right"></div></td>
    <!-- InstanceBeginEditable name="tracker" --> 
    <td height="16" colspan="2" rowspan="2" align="left"><a href="../../interfaces/interface.htm">&gt; 
      Interfaces</a> &gt; <a href="../../interfaces/guicomp.htm">GUI components</a> 
      &gt;<a href="HelperGUI.html"> HelperGUI </a></td>
    <!-- InstanceEndEditable -->
    <td width="15" rowspan="2" align="left">&nbsp;</td>
    <td width="214" rowspan="2" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="3" rowspan="3" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="66" align="left" valign="top">&nbsp;</td>
    <td width="444" align="left" valign="top">&nbsp;</td>
    <td colspan="2" align="left" valign="top"><strong></strong></td>
  </tr>
  <tr> <!-- InstanceBeginEditable name="content" --> 
    <td colspan="4" rowspan="3" align="left" valign="top"> <h2>HelperGUI </h2>
      <p>This tutorial introduces a class that provides 
        a simple graphical interface that helps speed up the process of testing 
        compositional algorithms.</p>
      <p> 
      <table border="0" style="height: 50%;">
        <tbody>
          <tr> 
            <td valign="top" rowspan="2"> <p>This HelperGUI utility is designed 
                to be extended by user classes.<br>
                It provides a simple graphical interface that speeds up the cycle 
                of composing-auditioning-recomposing by minimising the need for 
                recompiling simple changes. It is especially useful for novice 
                Java programmers as it enables the use of a graphical front-end 
                to jMusic with minimal coding (and no interface coding at all!).</p>
              <p>To use the HelperGUI class write a standard jMusic class with 
                a<font face="Courier New, Courier, mono"> main()</font> method 
                and a constructor. Make a <font face="Courier New, Courier, mono">super() 
                </font>call in the constructor. Overwrite the <font face="Courier New, Courier, mono">compose() 
                </font>method [which returns a Score object] and include the compositional 
                logic in that method.</p>
              <p>To render a score as an audio file, 
                an Instrument array needs to be declared and assigned to the value 
                'insts' - which is already declared in the HelperGUI class. As 
                in this example code fragment:</p>
              <pre>            Instrument sine = new SineInst(44100);.<br>            Instrument[] instArray = {sine};<br>            insts = instArray;</pre> <p>There 
                are five variables each with a slider that can be accessed to 
                change values in the composition. Each variable, named variableA 
                -&gt; variableE, return integer values between 0 and 127.</p>
              <p>&nbsp;</p>
              <p>The HelperGUI class is in the qt (quicktime) 
                package of jMusic because it supports quicktime playback (therefore 
                requires quicktime java to run). Those running systems where qt 
                is not supported (Linux for example) may be able to remove the 
                quicktime specific code from the source - or build your own similar 
                GUI.</p>
              <p>&nbsp; </p></td>
            <td style="vertical-align: bottom;"> <p>The 
                HelperGUI class can be extended by a jMusic class,<br>
                and will appear similar to this: </p></td>
          </tr>
          <tr> 
            <td style="vertical-align: top;"> <p></p>
              <center>
                <img
 src="Images/HelperGUI.jpg" alt="Helper GUI screen shot"
 style="width: 300px; height: 429px;" x-sas-useimagewidth=""
 x-sas-useimageheight="" title=""></center></td>
          </tr>
        </tbody>
      </table>
      <a href="../jmdemos/HelperTest.java">View / Download 
      source</a> - HelperTest source code
      <p></p>
      <p>Let's have a closer look.&nbsp; 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td><pre>import jm.JMC;<br>import jm.music.data.*;<br>import jm.midi.*;<br>import jm.util.*;<br>import jm.audio.*;<br>  import jm.gui.helper.HelperGUI  <br>&nbsp;<br><span class="comment">/**<br> * @author Andrew R. Brown<br> */  </span><br>&nbsp;<br>public final class HelperTest extends HelperGUI implements JMC{<br>	public static void main(String[] args){<br>		new HelperTest();<br>	}<br>         <br>        public HelperTest() {<br>        	super(); <br>		setVariableA(10, "Range");<br>	      	setVariableB( 60, "Note length");<br> 	}<br>        <br>        public Score compose() {<br>        	Score s = new Score("Test");<br>        	Part p = new Part("Guitar", 0, 0);<br>        	Phrase  scale = new Phrase();<br>		  <br>        	<span class="comment">//create the phrase note by note  </span><br>        	for(int i=0;i&lt;12;){<br>    			int pitch = C4+(int)(Math.random() * <br>				variableA + 1) - variableA / 2;<br>			if (pitch&gt;=0&amp;&amp;pitch&lt;=127){    <span class="comment">//check to see if in valid range  </span><br>  				Note n = new Note(pitch, DEMI_SEMI_QUAVER * <br>					(int)(Math.random()*variableB + 1));<br>				scale.addNote(n);<br>				i++;<br>			}<br>    		}    
            	p.addPhrase(scale);
            	s.addPart(p);  
&nbsp;
            	<span class="comment">// set up the audio instrument array for rendering  </span>
            	Instrument sine = new SineInst(44100);
            	Instrument[] instArray = {sine};
            	insts = instArray;
              
            	<span class="comment">// send the score to the HelperGUi class for its use  </span>
            	return s;
	}     
}  </pre> </td>
          </tr>
        </tbody>
      </table>
      <p></p>
      <p>The HelperTest class imports the qt.*; package 
        - this is required to access the HelperGUI class.</p>
      <p>The class declaration line includes 'extends 
        HelperGUI' to indicate that it should inherit the functionality of the 
        HelperGUI class - including the ability to draw the user interface.</p>
      <p>The main method simply class the constructor, which in turn makes a call 
        to the HelperGUI constructor.<br>
        Becuse the HelperTest class extends the HelperGUI class, the HelperGUI 
        class is referred to as the HelperTest's 'super' class.</p>
      <p>The HelperTest class (to take advantage of the GUI - Graphical User Interface) 
        must include a public<font face="Courier New, Courier, mono"> compose()</font> 
        method that returns a Score. <br>
        The HelperGUI class expects this method to be there and will not operate 
        correctly without one.<br>
        In Java-speak we are overriding the <font face="Courier New, Courier, mono">compose()</font> 
        method of the super class. </p>
      <p>In the <font face="Courier New, Courier, mono">compose() </font>method 
        a score is created - any way you like - and is computed and returned to 
        the HelperGUI class each time you click the 'Compose' button on the GUI.</p>
      <p>The HelperGUI includes five assignable sliders.<br>
        Two are used in this example, variableA and variableB are integer variables 
        declared by the super class and availible for access by any extending 
        classes. Their value will be updated as the sliders on the GUI are moved. 
        This allows you to try a few different settings for your compositional 
        algorithm without needing to recompile and run. The variableA -&gt; variableE 
        values are all integers from 0-127, so you may need to do some simple 
        math to scale or change type for use in your compositional algorithm.</p>
      <p>In order to use the rendering option - which saves jMusic scores as audio 
        files using instruments you create - you need to declare an instrument 
        array.<br>
        In this example, an array of one instrument, called sine, is set up then 
        the locally declared array 'instArray' is assigned to the 'inst' variable 
        of the super class. This is necessary so the HelperGUI class knows which 
        audio instruments to use for rendering.</p>
      <p><b>Using more of the Variable sliders</b></p>
      <p>This class below uses the variable sliders to determine the probability 
        of various drum rhythms and (variableE) the tempo. <br>
        The variables are set to initial values in the constructor, then can be 
        changed from the GUI at run time. <br>
        Note that the variables are multiplied and divided to get into the appropriate 
        range, and that we make use of the fact that in Java division of an integer 
        by a double results in a double value.</p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td>
<pre>import jm.JMC;<br>import jm.music.data.*;<br>import jm.midi.*;<br>import jm.util.*;<br>import jm.audio.*;<br>import jm.gui.helper.HelperGUI;
&nbsp;
<span class="comment">/**
 * @author Andrew R. Brown
 */</span><br>&nbsp;<br>public final class Prob extends HelperGUI implements JMC{<br>	public static void main(String[] args){<br>		new Prob();<br>	}<br>         <br>        public Prob() {<br>            super();<br>            setVariableA(100,"Kick down beat prob.");<br>            setVariableB(95,"Main snare &amp; hat prob.");<br>            setVariableC(70,"Hat off-beat prob.");<br>            setVariableD(5,"Kick and Snare off-beat prob.");<br>            setVariableE(60,"Tempo");<br>        }<br>        <br>        public Score compose() {<br>            Score s = new Score("Test");<br>            Part p = new Part("Drums", 25, 9);<br>            Phrase kPhrase = new Phrase("Kick drum",0.0);<br>            Phrase sPhrase = new Phrase("Snare drum",0.0);<br>            Phrase hPhrase = new Phrase("Hi hats",0.0);<br>            <br>            s.setTempo(variableE * 2);<br>		<br>          <span class="comment">  // probability array</span>
            double[] kickProbs = {variableA / 100.0, variableD / 100.0,
             variableD / 100.0, variableD / 100.0};<br>            double[] snareProbs = {variableD / 100.0, variableD / 100.0,
             variableB / 100.0, variableD / 100.0};<br>            double[] hatProbs = {variableB / 100.0, variableC / 100.0,
             variableB / 100.0, variableC / 100.0};<br>&nbsp;<br>           <span class="comment"> //create the phrase note by note</span>
            double choice;
            for (int r = 0; r &lt; 8; r++) {
                for(int i=0; i&lt;kickProbs.length; i++){
                  	choice = Math.random();
                  	if(choice &lt; kickProbs[i]) {
      				Note n = new Note(C2, SEMI_QUAVER);
      				kPhrase.addNote(n);
      			} else {
      				Note n = new Note(REST, SEMI_QUAVER);
      				kPhrase.addNote(n);
      			}
                }
                for(int i=0; i&lt;snareProbs.length; i++){
                  	choice = Math.random();
                  	if(choice &lt; snareProbs[i]) {
      				Note n = new Note(D2, SEMI_QUAVER);
      				sPhrase.addNote(n);
      			} else {
      				Note n = new Note(REST, SEMI_QUAVER);
      				sPhrase.addNote(n);
      			}
                }
                for(int i=0; i&lt;hatProbs.length; i++){
                  	choice = Math.random();
                  	if(choice &lt; hatProbs[i]) {
      				Note n = new Note(FS2, SEMI_QUAVER);
      				hPhrase.addNote(n);
      			} else {
      				Note n = new Note(REST, SEMI_QUAVER);
      				hPhrase.addNote(n);
      			}
                }
            }
                
            p.addPhrase(kPhrase);
            p.addPhrase(sPhrase);
            p.addPhrase(hPhrase);
            s.addPart(p);
            
            return s;
        }     
}</pre> 
            </td>
          </tr>
        </tbody>
      </table>
    
      </td>
    <!-- InstanceEndEditable --></tr>
  <tr> 
    <td align="left"> <div align="left"></div></td>
  </tr>
  <tr> 
    <td align="left">&nbsp;</td>
  </tr>
</table>
<blockquote> 
  <p name="Map"> 
    <map name="Map">
      <area shape="rect" coords="4,4,41,29" href="http://jmusic.ci.qut.edu" target="_blank" alt="jMusic">
      <area shape="rect" coords="43,5,80,31" href="http://www.ozco.gov.au" target="_blank" alt="Australia Council">
      <area shape="rect" coords="83,4,108,29" href="http://www.qut.com" target="_blank" alt="Queensland University of Technology">
    </map>
    <map name="Map2">
      <area shape="rect" coords="702,1,758,12" href="../../extras/sitemap.html" target="_self" alt="Sitemap">
      <area shape="rect" coords="629,1,687,12" href="../../extras/contact.html" target="_self" alt="Contact">
      <area shape="rect" coords="574,1,615,14" href="../../index.html" target="_self" alt="Home">
    </map>
    <map name="Map3">
      <area shape="rect" coords="553,5,601,18" href="#" alt="Home">
      <area shape="rect" coords="612,4,671,18" href="#">
      <area shape="rect" coords="683,3,735,19" href="#">
      <area shape="rect" coords="9,8,227,59" href="#" target="index.html">
    </map>
    <map name="Map4">
      <area shape="rect" coords="6,9,40,41" href="http://www.qut.com" target="_blank" alt="http://www.qut.com">
      <area shape="rect" coords="44,14,87,42" href="http://explodingart.com/jmusic" target="_blank" alt="http://explodingart.com/jmusic">
      <area shape="rect" coords="90,9,138,43" href="http://www.ozco.gov.au" target="_parent" alt="http://www.ozco.gov.au">
      <area shape="rect" coords="313,13,512,36" href="../../contact.html">
    </map>
  </p>
</blockquote>
<map name="Map5">
  <area shape="rect" coords="-7,4,228,51" href="../../index.htm" target="_self" alt="Digital Instrument making">
  <area shape="rect" coords="599,1,658,18" href="../../index.htm" alt="Home">
  <area shape="rect" coords="677,3,755,18" href="../../extras/contact.htm" target="extras">
</map>
</body>
<!-- InstanceEnd --></html>
