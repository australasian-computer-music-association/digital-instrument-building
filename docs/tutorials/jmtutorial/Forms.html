<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><!-- InstanceBegin template="/Templates/tutorial files.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<!-- InstanceBeginEditable name="doctitle" -->
<title>Digital Instrument Building</title>
<!-- InstanceEndEditable --> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<META NAME="DC.Creator" CONTENT="PersonalName= Andrew R. Brown  ">
<META NAME="DC.Creator.Email" CONTENT="algorithmicmusic@gmail.com,">
<META NAME="DC.Rights" CONTENT="Andrew R. Brown ">
<META NAME="DC.Title" CONTENT="Digital Instrument Building - Music software development with jMusic">
<META NAME="DC.Title.Alternative" content ="Music software development with jMusic">
<META NAME="DC.Subject" CONTENT="music, java, composition, algorithmic, digital music, generative music, instrument building, music analysing software development, Australia">
<META NAME="DC.Description" CONTENT="This site is a tutorial resource designed to assist in the training and self education of up-and-coming digital instrument developers. The tutorials cover topics including music software design, audio synthesis, digital signal processing, compositional systems, and computer programming concepts. ">
<META NAME="DC.Language" SCHEME="rfc1766" CONTENT="en-au">
<META NAME="DC.Audience" CONTENT="All">
<META NAME="DC.Date.Created" CONTENT="06-04-2003">
<META NAME="DC.Availability" CONTENT="PersonalName= Andrew R. Brown; email= algorithmicmusic@gmail.com">
<!-- ImageReady Preload Script (menubanner2.psd) -->
<SCRIPT TYPE="text/javascript">
<!--

function newImage(arg) {
	if (document.images) {
		rslt = new Image();
		rslt.src = arg;
		return rslt;
	}
}

function changeImages() {
	if (document.images && (preloadFlag == true)) {
		for (var i=0; i<changeImages.arguments.length; i+=2) {
			document[changeImages.arguments[i]].src = changeImages.arguments[i+1];
		}
	}
}

var preloadFlag = false;
function preloadImages() {
	if (document.images) {
		Music_algorithms_over = newImage("images/Music-algorithms-over.jpg");
		Interfaces_over = newImage("images/Interfaces-over.jpg");
		Programming_over = newImage("images/Programming-over.jpg");
		Acoustics_over = newImage("images/Acoustics-over.jpg");
		context_over = newImage("images/context-over.jpg");
		audio_over = newImage("images/audio-over.jpg");
		MIDI_over = newImage("images/MIDI-over.jpg");
		preloadFlag = true;
	}
}

// -->
</SCRIPT>
<!-- End Preload Script -->
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}
//-->
</script>
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_reloadPage(init) {  //reloads the window if Nav4 resized
  if (init==true) with (navigator) {if ((appName=="Netscape")&&(parseInt(appVersion)==4)) {
    document.MM_pgW=innerWidth; document.MM_pgH=innerHeight; onresize=MM_reloadPage; }}
  else if (innerWidth!=document.MM_pgW || innerHeight!=document.MM_pgH) location.reload();
}
MM_reloadPage(true);

function MM_nbGroup(event, grpName) { //v6.0
  var i,img,nbArr,args=MM_nbGroup.arguments;
  if (event == "init" && args.length > 2) {
    if ((img = MM_findObj(args[2])) != null && !img.MM_init) {
      img.MM_init = true; img.MM_up = args[3]; img.MM_dn = img.src;
      if ((nbArr = document[grpName]) == null) nbArr = document[grpName] = new Array();
      nbArr[nbArr.length] = img;
      for (i=4; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
        if (!img.MM_up) img.MM_up = img.src;
        img.src = img.MM_dn = args[i+1];
        nbArr[nbArr.length] = img;
    } }
  } else if (event == "over") {
    document.MM_nbOver = nbArr = new Array();
    for (i=1; i < args.length-1; i+=3) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = (img.MM_dn && args[i+2]) ? args[i+2] : ((args[i+1])? args[i+1] : img.MM_up);
      nbArr[nbArr.length] = img;
    }
  } else if (event == "out" ) {
    for (i=0; i < document.MM_nbOver.length; i++) {
      img = document.MM_nbOver[i]; img.src = (img.MM_dn) ? img.MM_dn : img.MM_up; }
  } else if (event == "down") {
    nbArr = document[grpName];
    if (nbArr)
      for (i=0; i < nbArr.length; i++) { img=nbArr[i]; img.src = img.MM_up; img.MM_dn = 0; }
    document[grpName] = nbArr = new Array();
    for (i=2; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = img.MM_dn = (args[i+1])? args[i+1] : img.MM_up;
      nbArr[nbArr.length] = img;
  } }
}
//-->
</script>
<link href="../../style/main.css" rel="stylesheet" type="text/css">
<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->
</head>
<body leftmargin="3" topmargin="3" marginwidth="0" marginheight="0"  onLoad="MM_preloadImages('../../images/banner/audio-over.jpg','../../images/banner/MIDI-over.jpg','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Interfaces-over.jpg','../../images/banner/Programming-over.jpg','../../images/banner/Acoustics-over.jpg','../../images/banner/context-over.jpg','../../images/banner/banner_08.gif')">
<table width="691" border="0" align="center">
  <tr> 
    <td colspan="5" align="left"> <div align="center"> 
        <table border="0" align="left" cellpadding="0" cellspacing="0">
          <tr> 
            <td colspan="8"><img src="../../images/banner.jpg" alt="" width=758 height=57 border="0" usemap="#Map5"></td>
          </tr>
          <tr> 
            <td width="50"><a href="../../Audio/audio.htm" target="_top" onClick="MM_nbGroup('down','group1','Audio','../../images/banner/audio-over.jpg',1)" onMouseOver="MM_nbGroup('over','Audio','../../images/banner/audio-over.jpg','../../images/banner/audio-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/audio.jpg" alt="audio" name="Audio" width="50" height="24" border="0" onload=""></a></td>
            <td width="47"><a href="../../midi/midi.htm" target="_top" onClick="MM_nbGroup('down','group1','MIDI','../../images/banner/MIDI-over.jpg',1)" onMouseOver="MM_nbGroup('over','MIDI','../../images/banner/MIDI-over.jpg','../../images/banner/MIDI-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/MIDI.jpg" alt="MIDI" name="MIDI" width="47" height="24" border="0" onload=""></a></td>
            <td width="117"><a href="../../musalgo/musalgo.htm" target="_top" onClick="MM_nbGroup('down','group1','musalgorithms','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOver="MM_nbGroup('over','musalgorithms','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Music-algorithms.jpg" alt="Music Algorithms" name="musalgorithms" width="117" height="24" border="0" onload=""></a></td>
            <td width="88"><a href="../../interfaces/interface.htm" target="_top" onClick="MM_nbGroup('down','group1','Interfaces','../../images/banner/Interfaces-over.jpg',1)" onMouseOver="MM_nbGroup('over','Interfaces','../../images/banner/Interfaces-over.jpg','../../images/banner/Interfaces-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Interfaces.jpg" alt="Interfaces" name="Interfaces" width="88" height="24" border="0" onload=""></a></td>
            <td width="103"><a href="../../programming/programming.htm" target="_top" onClick="MM_nbGroup('down','group1','Programming','../../images/banner/Programming-over.jpg',1)" onMouseOver="MM_nbGroup('over','Programming','../../images/banner/Programming-over.jpg','../../images/banner/Programming-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Programming.jpg" alt="Programming" name="Programming" width="103" height="24" border="0" onload=""></a></td>
            <td width="81"><a href="../../acoustics/acoustics.htm" target="_top" onClick="MM_nbGroup('down','group1','Acoustics','../../images/banner/Acoustics-over.jpg',1)" onMouseOver="MM_nbGroup('over','Acoustics','../../images/banner/Acoustics-over.jpg','../../images/banner/Acoustics-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Acoustics.jpg" alt="Acoustics" name="Acoustics" width="81" height="24" border="0" onload=""></a></td>
            <td width="100"><a href="../../context/context.htm" target="_top" onClick="MM_nbGroup('down','group1','Context','../../images/banner/context-over.jpg',1)" onMouseOver="MM_nbGroup('over','Context','../../images/banner/context-over.jpg','../../images/banner/context-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/context.jpg" alt="Context" name="Context" width="100" height="24" border="0" onload=""></a></td>
            <td width="156"><img src="../../images/banner/banner_09.gif" width="172" height="24"></td>
          </tr>
        </table>
      </div></td>
  </tr>
  <tr> 
    <td width="3" align="left"> <div align="right"></div>
      <div align="right"></div>
      <div align="right"></div></td>
    <!-- InstanceBeginEditable name="tracker" -->
    <td height="16" colspan="2" rowspan="2" align="left"><a href="../../midi/midi.htm">&gt; 
      MIDI </a> &gt; <a href="../../midi/musdata.htm">Musical Data</a> &gt;<a href="Forms.html"> 
      Forms: Arranging phrases</a></td>
    <!-- InstanceEndEditable -->
    <td width="15" rowspan="2" align="left">&nbsp;</td>
    <td width="214" rowspan="2" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="3" rowspan="3" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="66" align="left" valign="top">&nbsp;</td>
    <td width="444" align="left" valign="top">&nbsp;</td>
    <td colspan="2" align="left" valign="top"><strong></strong></td>
  </tr>
  <tr> <!-- InstanceBeginEditable name="content" --> 
    <td colspan="4" rowspan="3" align="left" valign="top"><h2>Forms: Arranging 
        phrases</h2>
      <p>This class shows how you can experiment with different arrangements of 
        phrases. <br>
        The same material can be reorganised into different forms so that you 
        can see which works best for you. <br>
        The program creates two MIDI files with different arrangements of the 
        same phrase material.</p>
      <p>To hear the results play the MIDI files below. Binary and Ternary form 
        respectively.<br>
        <embed src="soundExamples/Form1.mid"
 pluginspage="http://quicktime.apple.com" width="150" height="60"
 controller="TRUE" loop="FALSE" autoplay="FALSE"></embed> 
        <embed src="soundExamples/Form2.mid"
 pluginspage="http://quicktime.apple.com" width="150" height="60"
 controller="TRUE" loop="FALSE" autoplay="FALSE"></embed><br>
        <a href="../jmdemos/Form.java"
 target="_self">Click here to view source</a></p>
      <p>Lets have a closer look at what just happened. 
         
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>import jm.JMC;<br>import jm.music.data.*;<br>import jm.midi.*;<br>	 </pre> </td>
          </tr>
        </tbody>
      </table>
      The basic jm libraries used by the class are imported first. The JMC has 
      the note constants and so on.<br>
      The jm/music/data directory has the jm data structure classes, such as phrase.<br>
      The jm/midi directory has the classes used to write a MIDI file of the score. 
      <p></p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre class="comment"> /**<br> * An example which generates two different<br> * score arrangements from the same phrase material<br> */
	 </pre> 
            </td>
          </tr>
        </tbody>
      </table>
      This is a comment. Important to read, but has 
      no impact on the way the program runs.
      <p></p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>	public static void main(String[] args){<br>		Score s = new Score();<br>		Part p = new Part();<br>		<br>		System.out.println("Starting part length is  "+p.getEndTime());<br>	 </pre> 
            </td>
          </tr>
        </tbody>
      </table>
      The main() method is declared and an empty Score called 's' and an empty 
      Part called 'p' are created.<br>
      To confirm the part is empty its length is printed to the screen.<br>
      Further printouts follow which trace the change in size of the part as phrases 
      are added to it. <br>
      Notice that Score and Part declarations need not take any arguments.<br>
      This is important for the Part in this example, as it defaults to a start 
      time of -1.0. <br>
      This makes no sense, but is used as a flag by the Part to add it to the 
      end of the Part. <br>
      In this way you don't need to calculate the start time yourself - jMusic 
      will simply add the Phrases (with a start time of -1.0) to the Part in sequential 
      order (like notes in a phrase). 
      <p></p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>	   <span class="comment"> //create the first score form</span>
		p.addPhrase(makePhrase1());
		p.addPhrase(makePhrase2());
		s.addPart(p);
				
		System.out.println("Form1 part length is  "+p.getEndTime());</pre> 
            </td>
          </tr>
        </tbody>
      </table>
      This first form is a simple binary form - phrase 1 followed by phrase 2.<br>
      The first line in this section is a comment. The next two add new phrases 
      to the part 'p'. <br>
      They do so by calling the makePhrase1() and makePhrase2() methods which 
      are described in detail below. <br>
      The part now has two phrases in it. The part is added to the score 's'. 
      <br>
      The last line prints out the current length of the part 'p' which will be 
      equal to the combined lengths of the two phrases within it. 
      <p></p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>	    Write.midi(s, "Form1.mid", s);</pre> </td>
          </tr>
        </tbody>
      </table>
      This line converts the jm score called 's' into a midi file called 'Form1.mid'. 
      <br>
      All jm scores have the ability to write themselves as MIDI files in this 
      way, which is why the line starts with the name of the score ('s' in this 
      case). 
      <p></p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>	    p.empty();<br>	    s.empty();</pre> </td>
          </tr>
        </tbody>
      </table>
      Before creating the next form we clear out the contents of the part 'p' 
      and score 's' so we can reuse them.<br>
      An alternative would be to create a new score and part for the second form 
      but this is just as neat, and shows you the empty() methods as well :) 
      <p></p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>	    p.addPhrase(makePhrase2());<br>		p.addPhrase(makePhrase1());<br>		p.addPhrase(makePhrase2());<br>		s.addPart(p);<br>		<br>		System.out.println("Form2 part length is  "+p.getEndTime());<br>		
		<span class="comment">//write a MIDI file to disk</span>
		Write.midi(s, "Form2.mid");</pre> 
            </td>
          </tr>
        </tbody>
      </table>
      This section of code creates the second form in the same way as above. <br>
      The second form is ternary - phrase 2 followed by phrase 1 followed by phrase 
      2 again.<br>
      After being created the length of the part is printed and the score is written 
      to a MIDI file. 
      <p></p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>	   private static Phrase makePhrase1() {<br>		Phrase phrase = new Phrase();<br>		for(short i=0;i&lt;12;i++){<br>			Note n = new Note(c5+i, Q);<br>			phrase.addNote(n);<br>		}<br>		return phrase;<br>	}</pre> 
            </td>
          </tr>
        </tbody>
      </table>
      There are two more methods (apart from main()) in this class, the first 
      of these is above.<br>
      The makePhrase1() method simply creates an ascending chromatic scale. <br>
      Because we reuse the phrase several times it is efficient to have it as 
      a separate method which can be called whenever required. <br>
      Notice that the method returns a Phrase object, which is why the first line 
      of the method is private static Phrase ... <br>
      rather than private static void ...(the void key word indicates that no 
      value is returned by the method). 
      <p></p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>	   private static Phrase makePhrase2() {<br>		Phrase phrase = new Phrase();<br>		for(short i=12;i&gt;0;i--){<br>			Note n = new Note(c5+i, Q);<br>			phrase.addNote(n);<br>		}<br>		return phrase;<br>	}</pre> 
            </td>
          </tr>
        </tbody>
      </table>
      The last method creates a descending chromatic 
      scale.
      <p></p>
      <p>Try modifying the class to produce a third 
        score with a different form structure. </p>
     
    
    
      </td>
    <!-- InstanceEndEditable --></tr>
  <tr> 
    <td align="left"> <div align="left"></div></td>
  </tr>
  <tr> 
    <td align="left">&nbsp;</td>
  </tr>
</table>
<blockquote> 
  <p name="Map"> 
    <map name="Map">
      <area shape="rect" coords="4,4,41,29" href="http://jmusic.ci.qut.edu" target="_blank" alt="jMusic">
      <area shape="rect" coords="43,5,80,31" href="http://www.ozco.gov.au" target="_blank" alt="Australia Council">
      <area shape="rect" coords="83,4,108,29" href="http://www.qut.com" target="_blank" alt="Queensland University of Technology">
    </map>
    <map name="Map2">
      <area shape="rect" coords="702,1,758,12" href="../../extras/sitemap.html" target="_self" alt="Sitemap">
      <area shape="rect" coords="629,1,687,12" href="../../extras/contact.html" target="_self" alt="Contact">
      <area shape="rect" coords="574,1,615,14" href="../../index.html" target="_self" alt="Home">
    </map>
    <map name="Map3">
      <area shape="rect" coords="553,5,601,18" href="#" alt="Home">
      <area shape="rect" coords="612,4,671,18" href="#">
      <area shape="rect" coords="683,3,735,19" href="#">
      <area shape="rect" coords="9,8,227,59" href="#" target="index.html">
    </map>
    <map name="Map4">
      <area shape="rect" coords="6,9,40,41" href="http://www.qut.com" target="_blank" alt="http://www.qut.com">
      <area shape="rect" coords="44,14,87,42" href="http://explodingart.com/jmusic" target="_blank" alt="http://explodingart.com/jmusic">
      <area shape="rect" coords="90,9,138,43" href="http://www.ozco.gov.au" target="_parent" alt="http://www.ozco.gov.au">
      <area shape="rect" coords="313,13,512,36" href="../../contact.html">
    </map>
  </p>
</blockquote>
<map name="Map5">
  <area shape="rect" coords="-7,4,228,51" href="../../index.htm" target="_self" alt="Digital Instrument making">
  <area shape="rect" coords="599,1,658,18" href="../../index.htm" alt="Home">
  <area shape="rect" coords="677,3,755,18" href="../../extras/contact.htm" target="extras">
</map>
</body>
<!-- InstanceEnd --></html>
