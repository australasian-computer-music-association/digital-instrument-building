<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><!-- InstanceBegin template="/Templates/tutorial files.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<!-- InstanceBeginEditable name="doctitle" -->
<title>Digital Instrument Building</title>
<!-- InstanceEndEditable --> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<META NAME="DC.Creator" CONTENT="PersonalName= Andrew R. Brown  ">
<META NAME="DC.Creator.Email" CONTENT="algorithmicmusic@gmail.com,">
<META NAME="DC.Rights" CONTENT="Andrew R. Brown ">
<META NAME="DC.Title" CONTENT="Digital Instrument Building - Music software development with jMusic">
<META NAME="DC.Title.Alternative" content ="Music software development with jMusic">
<META NAME="DC.Subject" CONTENT="music, java, composition, algorithmic, digital music, generative music, instrument building, music analysing software development, Australia">
<META NAME="DC.Description" CONTENT="This site is a tutorial resource designed to assist in the training and self education of up-and-coming digital instrument developers. The tutorials cover topics including music software design, audio synthesis, digital signal processing, compositional systems, and computer programming concepts. ">
<META NAME="DC.Language" SCHEME="rfc1766" CONTENT="en-au">
<META NAME="DC.Audience" CONTENT="All">
<META NAME="DC.Date.Created" CONTENT="06-04-2003">
<META NAME="DC.Availability" CONTENT="PersonalName= Andrew R. Brown; email= algorithmicmusic@gmail.com">
<!-- ImageReady Preload Script (menubanner2.psd) -->
<SCRIPT TYPE="text/javascript">
<!--

function newImage(arg) {
	if (document.images) {
		rslt = new Image();
		rslt.src = arg;
		return rslt;
	}
}

function changeImages() {
	if (document.images && (preloadFlag == true)) {
		for (var i=0; i<changeImages.arguments.length; i+=2) {
			document[changeImages.arguments[i]].src = changeImages.arguments[i+1];
		}
	}
}

var preloadFlag = false;
function preloadImages() {
	if (document.images) {
		Music_algorithms_over = newImage("images/Music-algorithms-over.jpg");
		Interfaces_over = newImage("images/Interfaces-over.jpg");
		Programming_over = newImage("images/Programming-over.jpg");
		Acoustics_over = newImage("images/Acoustics-over.jpg");
		context_over = newImage("images/context-over.jpg");
		audio_over = newImage("images/audio-over.jpg");
		MIDI_over = newImage("images/MIDI-over.jpg");
		preloadFlag = true;
	}
}

// -->
</SCRIPT>
<!-- End Preload Script -->
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}
//-->
</script>
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_reloadPage(init) {  //reloads the window if Nav4 resized
  if (init==true) with (navigator) {if ((appName=="Netscape")&&(parseInt(appVersion)==4)) {
    document.MM_pgW=innerWidth; document.MM_pgH=innerHeight; onresize=MM_reloadPage; }}
  else if (innerWidth!=document.MM_pgW || innerHeight!=document.MM_pgH) location.reload();
}
MM_reloadPage(true);

function MM_nbGroup(event, grpName) { //v6.0
  var i,img,nbArr,args=MM_nbGroup.arguments;
  if (event == "init" && args.length > 2) {
    if ((img = MM_findObj(args[2])) != null && !img.MM_init) {
      img.MM_init = true; img.MM_up = args[3]; img.MM_dn = img.src;
      if ((nbArr = document[grpName]) == null) nbArr = document[grpName] = new Array();
      nbArr[nbArr.length] = img;
      for (i=4; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
        if (!img.MM_up) img.MM_up = img.src;
        img.src = img.MM_dn = args[i+1];
        nbArr[nbArr.length] = img;
    } }
  } else if (event == "over") {
    document.MM_nbOver = nbArr = new Array();
    for (i=1; i < args.length-1; i+=3) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = (img.MM_dn && args[i+2]) ? args[i+2] : ((args[i+1])? args[i+1] : img.MM_up);
      nbArr[nbArr.length] = img;
    }
  } else if (event == "out" ) {
    for (i=0; i < document.MM_nbOver.length; i++) {
      img = document.MM_nbOver[i]; img.src = (img.MM_dn) ? img.MM_dn : img.MM_up; }
  } else if (event == "down") {
    nbArr = document[grpName];
    if (nbArr)
      for (i=0; i < nbArr.length; i++) { img=nbArr[i]; img.src = img.MM_up; img.MM_dn = 0; }
    document[grpName] = nbArr = new Array();
    for (i=2; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = img.MM_dn = (args[i+1])? args[i+1] : img.MM_up;
      nbArr[nbArr.length] = img;
  } }
}
//-->
</script>
<link href="../../style/main.css" rel="stylesheet" type="text/css">
<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->
</head>
<body leftmargin="3" topmargin="3" marginwidth="0" marginheight="0"  onLoad="MM_preloadImages('../../images/banner/audio-over.jpg','../../images/banner/MIDI-over.jpg','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Interfaces-over.jpg','../../images/banner/Programming-over.jpg','../../images/banner/Acoustics-over.jpg','../../images/banner/context-over.jpg','../../images/banner/banner_08.gif')">
<table width="691" border="0" align="center">
  <tr> 
    <td colspan="5" align="left"> <div align="center"> 
        <table border="0" align="left" cellpadding="0" cellspacing="0">
          <tr> 
            <td colspan="8"><img src="../../images/banner.jpg" alt="" width=758 height=57 border="0" usemap="#Map5"></td>
          </tr>
          <tr> 
            <td width="50"><a href="../../Audio/audio.htm" target="_top" onClick="MM_nbGroup('down','group1','Audio','../../images/banner/audio-over.jpg',1)" onMouseOver="MM_nbGroup('over','Audio','../../images/banner/audio-over.jpg','../../images/banner/audio-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/audio.jpg" alt="audio" name="Audio" width="50" height="24" border="0" onload=""></a></td>
            <td width="47"><a href="../../midi/midi.htm" target="_top" onClick="MM_nbGroup('down','group1','MIDI','../../images/banner/MIDI-over.jpg',1)" onMouseOver="MM_nbGroup('over','MIDI','../../images/banner/MIDI-over.jpg','../../images/banner/MIDI-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/MIDI.jpg" alt="MIDI" name="MIDI" width="47" height="24" border="0" onload=""></a></td>
            <td width="117"><a href="../../musalgo/musalgo.htm" target="_top" onClick="MM_nbGroup('down','group1','musalgorithms','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOver="MM_nbGroup('over','musalgorithms','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Music-algorithms.jpg" alt="Music Algorithms" name="musalgorithms" width="117" height="24" border="0" onload=""></a></td>
            <td width="88"><a href="../../interfaces/interface.htm" target="_top" onClick="MM_nbGroup('down','group1','Interfaces','../../images/banner/Interfaces-over.jpg',1)" onMouseOver="MM_nbGroup('over','Interfaces','../../images/banner/Interfaces-over.jpg','../../images/banner/Interfaces-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Interfaces.jpg" alt="Interfaces" name="Interfaces" width="88" height="24" border="0" onload=""></a></td>
            <td width="103"><a href="../../programming/programming.htm" target="_top" onClick="MM_nbGroup('down','group1','Programming','../../images/banner/Programming-over.jpg',1)" onMouseOver="MM_nbGroup('over','Programming','../../images/banner/Programming-over.jpg','../../images/banner/Programming-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Programming.jpg" alt="Programming" name="Programming" width="103" height="24" border="0" onload=""></a></td>
            <td width="81"><a href="../../acoustics/acoustics.htm" target="_top" onClick="MM_nbGroup('down','group1','Acoustics','../../images/banner/Acoustics-over.jpg',1)" onMouseOver="MM_nbGroup('over','Acoustics','../../images/banner/Acoustics-over.jpg','../../images/banner/Acoustics-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Acoustics.jpg" alt="Acoustics" name="Acoustics" width="81" height="24" border="0" onload=""></a></td>
            <td width="100"><a href="../../context/context.htm" target="_top" onClick="MM_nbGroup('down','group1','Context','../../images/banner/context-over.jpg',1)" onMouseOver="MM_nbGroup('over','Context','../../images/banner/context-over.jpg','../../images/banner/context-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/context.jpg" alt="Context" name="Context" width="100" height="24" border="0" onload=""></a></td>
            <td width="156"><img src="../../images/banner/banner_09.gif" width="172" height="24"></td>
          </tr>
        </table>
      </div></td>
  </tr>
  <tr> 
    <td width="3" align="left"> <div align="right"></div>
      <div align="right"></div>
      <div align="right"></div></td>
    <!-- InstanceBeginEditable name="tracker" -->
    <td height="16" colspan="2" rowspan="2" align="left"><a href="../../musalgo/musalgo.htm">&gt; 
      Music Algorithms </a>&gt; <a href="../../musalgo/modify.htm">Modifying</a> 
      &gt;<a href="UpDownLeftRight.html"> Up - Down, Left - Right </a></td>
    <!-- InstanceEndEditable -->
    <td width="15" rowspan="2" align="left">&nbsp;</td>
    <td width="214" rowspan="2" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="3" rowspan="3" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="66" align="left" valign="top">&nbsp;</td>
    <td width="444" align="left" valign="top">&nbsp;</td>
    <td colspan="2" align="left" valign="top"><strong></strong></td>
  </tr>
  <tr> <!-- InstanceBeginEditable name="content" --> 
    <td colspan="4" rowspan="3" >Up - Down, Left - Right 
      <P>This tutorial describes a class that generates a phrase then creates 
        a (not so intelligent) structure from it through transposition to shift 
        the notes up and down, and copying and pasting to different locations 
        to show moving left and right in time.</P>
      <P>Here is a score generated by this program:</P>
      <P> <IMG
         SRC="Images/UpDownLeftRight.gif" alt="up down left right" WIDTH=459 HEIGHT=160
         > </P>
      <P>This tutorial concerns the class ShiftAround.java</P>
      <P><A HREF="../jmdemos/ShiftAround.java"
         TARGET="_top">Click here to view the source.</A> </P>
      <P>Lets have a closer look. </P>
      <P>
      <TABLE BORDER=0 WIDTH="100%" bgcolor="#E0E0E0">
        <TR> 
          <TD> <PRE>import jm.JMC;
import jm.music.data.*;
import jm.music.tools.*;
import jm.util.*;</PRE> </TD>
        </TR>
      </TABLE>
      <p>In order to make use of the jMusic constants we import the jm.JMC class. 
        To use Note, Phrases, Parts, and Scores we import the jm.music.data package. 
        The Mod class is in the jm.music.tools package. In order to see and hear 
        the score we use the View and Write classes in the jm.util package.</P>
      <table width="100%" border="0" bgcolor="#E0E0E0">
        <tr>
          <td><PRE>public class ShiftAround implements JMC{
&nbsp;
	public static void main(String[] args) {
		Score score = new Score("JMDemo - Simple Auto Arranging");
		Part flutePart = new Part("Flute", FLUTE, 0);
		Phrase phr1 = new Phrase();
      double[] riff = {60, SQ, 67, SQ, 
      65, Q, 67, Q, 60, Q, 62, SQ, 67, SQ, 62, SQ, 59, SQ, 64, C}; </PRE>&nbsp;</td>
        </tr>
      </table>
      <P>

      <p>After declaring the class we start the <font face="Courier New, Courier, mono">main()</font> 
        method. In this one-method class all the action happens in the<font face="Courier New, Courier, mono"> 
        main()</font> method.</P>
      <P>First up we declare some method variables for the score, part, and phrase.<br>
        Then we create an array of pitch and rhythmValue data which describes 
        the melodic riff.</P>
         
         <TABLE BORDER=0 WIDTH="100%" bgcolor="#E0E0E0">
        <TR> 
          <TD> <PRE><span class = "comment">		// create an initial phrase</span>
		phr1.addNoteList(riff);
				<span class = "comment">
		// make sequenced phrases</span>
		Phrase phr2 = phr1.copy();
		Mod.transpose(phr2, 2);
		Phrase phr3 = phr1.copy();
		Mod.transpose(phr3, 4);
		<span class = "comment">
		// add phrases to the part</span>
		flutePart.addPhrase(phr1);
		flutePart.addPhrase(phr2);
		flutePart.addPhrase(phr3);
	    	    <span class = "comment">
		// add part to score</span>
		score.addPart(flutePart);</PRE> 
          </TD>
        </TR>
      </TABLE>
      <P>This section of code shows a melodic sequence. It is created by copying 
        and transposing the riff a couple of times.<br>
        After making and transposing the riffs they are added. By default in jMusic 
        phrases declared with no arguments - as done at the start of the method 
        - will be appended to the end of the part. So these three phrases will 
        play one after the other.<br>
        Finally, the part is added to the score. </P>
      <p></P>
      <P>A melodic sequence is a useful compositional device, and not hard to 
        achieve as you can see.</P>
         
         <TABLE BORDER=0 WIDTH="100%" bgcolor="#E0E0E0">
        <TR> 
          <TD> <PRE><span class = "comment">		//arrange at random later on</span>
		double currentEnd = score.getEndTime();
		int times = (int)(Math.random()* 8 + 7);
		for(int i=1;i&lt;times;i++){<span class = "comment">
			// make a copy of the phrase</span>
			Phrase temp = phr1.copy();<span class = "comment">
			// adjust the start time of the copy</span>
			double newStart = (double)(int)(Math.random()*32) + currentEnd;
			temp.setStartTime(newStart);<span class = "comment">
			//shift the phrase in octaves at random</span>
			Mod.transpose(temp, (int)(Math.random()*5 -2) *12);<span class = "comment">
			//add the copied phrase to the  part then score</span>
			Part p = new Part("Part "+i, 56 + (int)(Math.random() * 23), i);<span class = "comment">
			// avoid GM drums</span>
			if (p.getChannel() == 9) p.setChannel(16);<span class = "comment">
			// package phrase into jm score</span>
			p.addPhrase(temp);
			score.addPart(p);
		}</PRE> 
          </TD>
        </TR>
      </TABLE>
      <P> 
      <P>This next section of code creates copies of the riff, sets them to start 
        at a random location in time and adds them to a new part with a randomly 
        selected instrument.</P>
      <P>There are plenty of comments in the code to let you know what each line 
        does. Most importantly you should notice that jMusic composition can include 
        a combination of deterministic composition (the creation of the riff) 
        and some stochastic elements (the start times of the copied riffs). <br>
        The power in algorithmic music is in leveraging this stochastic and programmable 
        ability, while controlling and constraining the musical result within 
        the limits of your aesthetic preferences.</P>
      <TABLE BORDER=0 WIDTH="100%" bgcolor="#E0E0E0">
        <TR> 
          <TD> <PRE>	    Mod.shake(score, 50);<span class = "comment">
&nbsp;
		// display</span>
		View.show(score);
		<span class = "comment"></span>
		//write a MIDI file to disk
		Write.midi(score, "ShiftAround.mid");
	}
}</PRE> 
          </TD>
        </TR>
      </TABLE>
      <P>The score is shaken - but not stirred :) - which is a Mod method that 
        randomises the dynamic value of each note a bit, which makes it sound 
        somewhat less mechanical on playback. Although the setting in this example, 
        50, is quite extreme.</P>
      <P>The score is shown in a hybrid notation/piano roll display, as above, 
        then written out to a MIDI file for auditioning.</P> </td>
    <!-- InstanceEndEditable --></tr>
  <tr> 
    <td align="left"> <div align="left"></div></td>
  </tr>
  <tr> 
    <td align="left">&nbsp;</td>
  </tr>
</table>
<blockquote> 
  <p name="Map"> 
    <map name="Map">
      <area shape="rect" coords="4,4,41,29" href="http://jmusic.ci.qut.edu" target="_blank" alt="jMusic">
      <area shape="rect" coords="43,5,80,31" href="http://www.ozco.gov.au" target="_blank" alt="Australia Council">
      <area shape="rect" coords="83,4,108,29" href="http://www.qut.com" target="_blank" alt="Queensland University of Technology">
    </map>
    <map name="Map2">
      <area shape="rect" coords="702,1,758,12" href="../../extras/sitemap.html" target="_self" alt="Sitemap">
      <area shape="rect" coords="629,1,687,12" href="../../extras/contact.html" target="_self" alt="Contact">
      <area shape="rect" coords="574,1,615,14" href="../../index.html" target="_self" alt="Home">
    </map>
    <map name="Map3">
      <area shape="rect" coords="553,5,601,18" href="#" alt="Home">
      <area shape="rect" coords="612,4,671,18" href="#">
      <area shape="rect" coords="683,3,735,19" href="#">
      <area shape="rect" coords="9,8,227,59" href="#" target="index.html">
    </map>
    <map name="Map4">
      <area shape="rect" coords="6,9,40,41" href="http://www.qut.com" target="_blank" alt="http://www.qut.com">
      <area shape="rect" coords="44,14,87,42" href="http://explodingart.com/jmusic" target="_blank" alt="http://explodingart.com/jmusic">
      <area shape="rect" coords="90,9,138,43" href="http://www.ozco.gov.au" target="_parent" alt="http://www.ozco.gov.au">
      <area shape="rect" coords="313,13,512,36" href="../../contact.html">
    </map>
  </p>
</blockquote>
<map name="Map5">
  <area shape="rect" coords="-7,4,228,51" href="../../index.htm" target="_self" alt="Digital Instrument making">
  <area shape="rect" coords="599,1,658,18" href="../../index.htm" alt="Home">
  <area shape="rect" coords="677,3,755,18" href="../../extras/contact.htm" target="extras">
</map>
</body>
<!-- InstanceEnd --></html>
