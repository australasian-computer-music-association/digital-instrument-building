<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><!-- InstanceBegin template="/Templates/tutorial files.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<!-- InstanceBeginEditable name="doctitle" -->
<title>Digital Instrument Building</title>
<!-- InstanceEndEditable --> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<META NAME="DC.Creator" CONTENT="PersonalName= Andrew R. Brown  ">
<META NAME="DC.Creator.Email" CONTENT="algorithmicmusic@gmail.com,">
<META NAME="DC.Rights" CONTENT="Andrew R. Brown ">
<META NAME="DC.Title" CONTENT="Digital Instrument Building - Music software development with jMusic">
<META NAME="DC.Title.Alternative" content ="Music software development with jMusic">
<META NAME="DC.Subject" CONTENT="music, java, composition, algorithmic, digital music, generative music, instrument building, music analysing software development, Australia">
<META NAME="DC.Description" CONTENT="This site is a tutorial resource designed to assist in the training and self education of up-and-coming digital instrument developers. The tutorials cover topics including music software design, audio synthesis, digital signal processing, compositional systems, and computer programming concepts. ">
<META NAME="DC.Language" SCHEME="rfc1766" CONTENT="en-au">
<META NAME="DC.Audience" CONTENT="All">
<META NAME="DC.Date.Created" CONTENT="06-04-2003">
<META NAME="DC.Availability" CONTENT="PersonalName= Andrew R. Brown; email= algorithmicmusic@gmail.com">
<!-- ImageReady Preload Script (menubanner2.psd) -->
<SCRIPT TYPE="text/javascript">
<!--

function newImage(arg) {
	if (document.images) {
		rslt = new Image();
		rslt.src = arg;
		return rslt;
	}
}

function changeImages() {
	if (document.images && (preloadFlag == true)) {
		for (var i=0; i<changeImages.arguments.length; i+=2) {
			document[changeImages.arguments[i]].src = changeImages.arguments[i+1];
		}
	}
}

var preloadFlag = false;
function preloadImages() {
	if (document.images) {
		Music_algorithms_over = newImage("images/Music-algorithms-over.jpg");
		Interfaces_over = newImage("images/Interfaces-over.jpg");
		Programming_over = newImage("images/Programming-over.jpg");
		Acoustics_over = newImage("images/Acoustics-over.jpg");
		context_over = newImage("images/context-over.jpg");
		audio_over = newImage("images/audio-over.jpg");
		MIDI_over = newImage("images/MIDI-over.jpg");
		preloadFlag = true;
	}
}

// -->
</SCRIPT>
<!-- End Preload Script -->
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}
//-->
</script>
<script language="JavaScript" type="text/JavaScript">
<!--


function MM_reloadPage(init) {  //reloads the window if Nav4 resized
  if (init==true) with (navigator) {if ((appName=="Netscape")&&(parseInt(appVersion)==4)) {
    document.MM_pgW=innerWidth; document.MM_pgH=innerHeight; onresize=MM_reloadPage; }}
  else if (innerWidth!=document.MM_pgW || innerHeight!=document.MM_pgH) location.reload();
}
MM_reloadPage(true);

function MM_nbGroup(event, grpName) { //v6.0
  var i,img,nbArr,args=MM_nbGroup.arguments;
  if (event == "init" && args.length > 2) {
    if ((img = MM_findObj(args[2])) != null && !img.MM_init) {
      img.MM_init = true; img.MM_up = args[3]; img.MM_dn = img.src;
      if ((nbArr = document[grpName]) == null) nbArr = document[grpName] = new Array();
      nbArr[nbArr.length] = img;
      for (i=4; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
        if (!img.MM_up) img.MM_up = img.src;
        img.src = img.MM_dn = args[i+1];
        nbArr[nbArr.length] = img;
    } }
  } else if (event == "over") {
    document.MM_nbOver = nbArr = new Array();
    for (i=1; i < args.length-1; i+=3) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = (img.MM_dn && args[i+2]) ? args[i+2] : ((args[i+1])? args[i+1] : img.MM_up);
      nbArr[nbArr.length] = img;
    }
  } else if (event == "out" ) {
    for (i=0; i < document.MM_nbOver.length; i++) {
      img = document.MM_nbOver[i]; img.src = (img.MM_dn) ? img.MM_dn : img.MM_up; }
  } else if (event == "down") {
    nbArr = document[grpName];
    if (nbArr)
      for (i=0; i < nbArr.length; i++) { img=nbArr[i]; img.src = img.MM_up; img.MM_dn = 0; }
    document[grpName] = nbArr = new Array();
    for (i=2; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = img.MM_dn = (args[i+1])? args[i+1] : img.MM_up;
      nbArr[nbArr.length] = img;
  } }
}
//-->
</script>
<link href="../../style/main.css" rel="stylesheet" type="text/css">
<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->
</head>
<body leftmargin="3" topmargin="3" marginwidth="0" marginheight="0"  onLoad="MM_preloadImages('../../images/banner/audio-over.jpg','../../images/banner/MIDI-over.jpg','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Interfaces-over.jpg','../../images/banner/Programming-over.jpg','../../images/banner/Acoustics-over.jpg','../../images/banner/context-over.jpg','../../images/banner/banner_08.gif')">
<table width="691" border="0" align="center">
  <tr> 
    <td colspan="5" align="left"> <div align="center"> 
        <table border="0" align="left" cellpadding="0" cellspacing="0">
          <tr> 
            <td colspan="8"><img src="../../images/banner.jpg" alt="" width=758 height=57 border="0" usemap="#Map5"></td>
          </tr>
          <tr> 
            <td width="50"><a href="../../Audio/audio.htm" target="_top" onClick="MM_nbGroup('down','group1','Audio','../../images/banner/audio-over.jpg',1)" onMouseOver="MM_nbGroup('over','Audio','../../images/banner/audio-over.jpg','../../images/banner/audio-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/audio.jpg" alt="audio" name="Audio" width="50" height="24" border="0" onload=""></a></td>
            <td width="47"><a href="../../midi/midi.htm" target="_top" onClick="MM_nbGroup('down','group1','MIDI','../../images/banner/MIDI-over.jpg',1)" onMouseOver="MM_nbGroup('over','MIDI','../../images/banner/MIDI-over.jpg','../../images/banner/MIDI-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/MIDI.jpg" alt="MIDI" name="MIDI" width="47" height="24" border="0" onload=""></a></td>
            <td width="117"><a href="../../musalgo/musalgo.htm" target="_top" onClick="MM_nbGroup('down','group1','musalgorithms','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOver="MM_nbGroup('over','musalgorithms','../../images/banner/Music-algorithms-over.jpg','../../images/banner/Music-algorithms-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Music-algorithms.jpg" alt="Music Algorithms" name="musalgorithms" width="117" height="24" border="0" onload=""></a></td>
            <td width="88"><a href="../../interfaces/interface.htm" target="_top" onClick="MM_nbGroup('down','group1','Interfaces','../../images/banner/Interfaces-over.jpg',1)" onMouseOver="MM_nbGroup('over','Interfaces','../../images/banner/Interfaces-over.jpg','../../images/banner/Interfaces-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Interfaces.jpg" alt="Interfaces" name="Interfaces" width="88" height="24" border="0" onload=""></a></td>
            <td width="103"><a href="../../programming/programming.htm" target="_top" onClick="MM_nbGroup('down','group1','Programming','../../images/banner/Programming-over.jpg',1)" onMouseOver="MM_nbGroup('over','Programming','../../images/banner/Programming-over.jpg','../../images/banner/Programming-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Programming.jpg" alt="Programming" name="Programming" width="103" height="24" border="0" onload=""></a></td>
            <td width="81"><a href="../../acoustics/acoustics.htm" target="_top" onClick="MM_nbGroup('down','group1','Acoustics','../../images/banner/Acoustics-over.jpg',1)" onMouseOver="MM_nbGroup('over','Acoustics','../../images/banner/Acoustics-over.jpg','../../images/banner/Acoustics-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/Acoustics.jpg" alt="Acoustics" name="Acoustics" width="81" height="24" border="0" onload=""></a></td>
            <td width="100"><a href="../../context/context.htm" target="_top" onClick="MM_nbGroup('down','group1','Context','../../images/banner/context-over.jpg',1)" onMouseOver="MM_nbGroup('over','Context','../../images/banner/context-over.jpg','../../images/banner/context-over.jpg',1)" onMouseOut="MM_nbGroup('out')"><img src="../../images/banner/context.jpg" alt="Context" name="Context" width="100" height="24" border="0" onload=""></a></td>
            <td width="156"><img src="../../images/banner/banner_09.gif" width="172" height="24"></td>
          </tr>
        </table>
      </div></td>
  </tr>
  <tr> 
    <td width="3" align="left"> <div align="right"></div>
      <div align="right"></div>
      <div align="right"></div></td>
    <!-- InstanceBeginEditable name="tracker" -->
    <td height="16" colspan="2" rowspan="2" align="left"><a href="../../musalgo/musalgo.htm">&gt; 
      Music Algorithms </a>&gt; <a href="../../musalgo/analys.htm">Analysing</a> 
      &gt;<a href="Markov2.html"> Markov Matrix (Part 2) </a></td>
    <!-- InstanceEndEditable -->
    <td width="15" rowspan="2" align="left">&nbsp;</td>
    <td width="214" rowspan="2" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="3" rowspan="3" align="left">&nbsp;</td>
  </tr>
  <tr> 
    <td width="66" align="left" valign="top">&nbsp;</td>
    <td width="444" align="left" valign="top">&nbsp;</td>
    <td colspan="2" align="left" valign="top"><strong></strong></td>
  </tr>
  <tr> <!-- InstanceBeginEditable name="content" --> 
    <td colspan="4" rowspan="3" align="left" valign="top"> Markov Matrix (Part 
      2) 
      <p>If Markov matrices were limited to a single state per seed then their 
        musical usefulness would be limited<br>
        (as I am sure you have realised from playing around with the example in<a href="Markov1.html"> 
        part 1</a>). <br>
        Luckily, there are no such limits and seeds can in fact be any length 
        you like. </p>
      <p>Let's look back again at the set of numbers we used in part 1.<br>
        {64,62,60,62,64,64,64,62,62,62,64,67,67,64,62,60,62,64,64,64,64,62,62,64,62,60}<br>
        To produce a Markov matrix of a depth of more than 1 (1 was the depth 
        for the matrix in the previous example) we use seeds of more than one 
        element. <br>
        Let us build a matrix based on a seed of two elements instead of one (i.e. 
        a Markov depth of 2). We calculate a matrix with a depth of 2 in the same 
        way <br>
        we calculate a matrix with a depth of 1. The only difference is that we 
        base all our calculations on any two numbers being followed by another 
        number.<br>
        Remember our seed is now 2. Output is always 1 regardless of the Markov 
        depth. <br>
        <br>
        Our primary matrix now looks like this. </p>
      <p> 
      <table border="1" style="width: 100%;">
        <tbody>
          <tr> 
            <td width="16%"> <p> </p>
              <br> </td>
            <td width="21%"> <p><b>60</b> </p></td>
            <td width="21%"> <p><b>62</b> </p></td>
            <td width="21%"> <p><b>64</b> </p></td>
            <td width="21%"> <p><b>67</b> </p></td>
          </tr>
          <tr> 
            <td width="16%"> <p><b>64,62</b> </p></td>
            <td width="21%"> <p>0.6 </p></td>
            <td width="21%"> <p>0.4 </p></td>
            <td width="21%"> <p>0.0 </p></td>
            <td width="21%"> <p>0.0 </p></td>
          </tr>
          <tr> 
            <td width="16%"> <p><b>62,60</b> </p></td>
            <td width="21%"> <p>0.0 </p></td>
            <td width="21%"> <p>1.0 </p></td>
            <td width="21%"> <p>0.0 </p></td>
            <td width="21%"> <p>0.0 </p></td>
          </tr>
          <tr> 
            <td width="16%"> <p><b>60,62</b> </p></td>
            <td width="21%"> <p>0.0 </p></td>
            <td width="21%"> <p>0.0 </p></td>
            <td width="21%"> <p>1.0 </p></td>
            <td width="21%"> <p>0.0 </p></td>
          </tr>
          <tr> 
            <td width="16%"> <p><b>62,64</b> </p></td>
            <td width="21%"> <p>0.0 </p></td>
            <td width="21%"> <p>0.25 </p></td>
            <td width="21%"> <p>0.50 </p></td>
            <td width="21%"> <p>0.25 </p></td>
          </tr>
          <tr> 
            <td width="16%"> <p><b>64,64</b> </p></td>
            <td width="21%"> <p>0.0 </p></td>
            <td width="21%"> <p>0.4 </p></td>
            <td width="21%"> <p>0.6 </p></td>
            <td width="21%"> <p>0.0 </p></td>
          </tr>
          <tr> 
            <td width="16%"> <p><b>62,62</b> </p></td>
            <td width="21%"> <p>0.0 </p></td>
            <td width="21%"> <p>0.3333333 </p></td>
            <td width="21%"> <p>0.6666666 </p></td>
            <td width="21%"> <p>0.0 </p></td>
          </tr>
          <tr> 
            <td width="16%"> <p><b>67,67</b> </p></td>
            <td width="21%"> <p>0.0 </p></td>
            <td width="21%"> <p>0.0 </p></td>
            <td width="21%"> <p>1.0 </p></td>
            <td width="21%"> <p>0.0 </p></td>
          </tr>
          <tr> 
            <td width="16%"> <p><b>64,67</b> </p></td>
            <td width="21%"> <p>0.0 </p></td>
            <td width="21%"> <p>0.0 </p></td>
            <td width="21%"> <p>0.0 </p></td>
            <td width="21%"> <p>1.0 </p></td>
          </tr>
          <tr> 
            <td width="16%"> <p><b>67,64</b> </p></td>
            <td width="21%"> <p>0.0 </p></td>
            <td width="21%"> <p>1.0 </p></td>
            <td width="21%"> <p>0.0 </p></td>
            <td width="21%"> <p>0.0 </p></td>
          </tr>
        </tbody>
      </table>
      <p></p>
      <p>The obvious change is that the far left hand column now contains 2 numbers 
        (prior states) as the seed rather than 1. <br>
        Two more obvious changes have occurred. There are more rows than there 
        were previously and there are more 1.0 (100%) weighings than there <br>
        were before. These last two points seem obvious, but they point to the 
        most important feature of Markov chains; the ability to maintain local 
        context<br>
        and provide for more discriminatory, therefore musically coherent, output. 
        The output of the matrix maintains the 'character' of the data used to 
        <br>
        construct it. Musically we might say it stores a sense of 'style'.</p>
      <p>A Markov chain can be of any depth (any seed length) but there are a 
        number of important considerations when regarding depth.<br>
        As the depth of the Markov chain approaches the length of the phrase (data) 
        the novelty (randomness) of the output decreases.<br>
        Take the above matrix as an example. When we calculated the matrix for 
        a Markov chain of depth 1, then 25% of the rows had a 100% <br>
        (no randomness) chance of selecting a particular note. Now in our matrix 
        of depth 2 more than 50% of rows have a 100% chance of selecting<br>
        a particular note. This is the tradeoff with Markov chains. The guarantee 
        of a particular sequence introduces stability and thematic coherence <br>
        but also introduces the chance of a very similar and even identical arrangement. 
        The resulting melody might be too close to the original.</p>
      <p>To test this matrix we are not going to write another engine but instead 
        make use of another of jMusic's in built classes.<br>
        This class is called PhraseMatrix and it will calculate a matrix and generate 
        a phrase of any length based on the calculated matrix.<br>
        It will also do this for you for any depth level and calculates matrices 
        for pitch, rhythm and volume (yes, of course you can create matrices for 
        characteristics other than pitch, for example rhythms value, dynamic, 
        or position in the bar).<br>
        Here is an example class which uses the PhraseMatrix. </p>
      <p><a
 href="../jmdemos/MarkovTest.java" target="_top">Click here to view/download the 
        source.</a></p>
      <p> 
      <table border="0" width="100%" bgcolor="#e0e0e0">
        <tbody>
          <tr> 
            <td> <pre>  1: import jm.JMC;
  2: import jm.music.data.*;
  3: import jm.music.tools.*;
  4: import jm.util.*;
&nbsp;
  6: public class MarkovTest implements JMC{<br>&nbsp;<br>  8:     public static void main(String[] args){<br>  9:         Phrase marysLamb = new Phrase();<br> 10:         int[] p = {64,62,60,62,64,64,64,62,62,62,64,<br>                           67,67,64,62,60,62,64,64,64,64,62,62,64,62,60};<br> 11:         double[] r = {C,C,C,C,C,C,M,C,C,M,C,C,M,C,<br>                           C,C,C,C,C,C,C,C,C,C,C,M};<br> 12:         int[] d = {80,70,60,70,80,80,80,70,70,70,80,<br>                                  100,100,80,70,60,70,80,80,80,80,70,70,80,70,60};<br> 13:         marysLamb.addNoteList(p,r,d);<br> 14:         int markovDepth = 2;<br> 15:         PhraseMatrix matrix = new PhraseMatrix(marysLamb,markovDepth);<br> 16:         Phrase myLamb = matrix.generate(true,true,true,20);<br> 17:         Score scr = new Score("MarysLamb");<br> 18:         Part part = new Part();<br> 19:         part.addPhrase(myLamb);<br> 20:         scr.addPart(part);<br> 21:         Write.midi(scr);<br> 22:        }<br> 23: }</pre> 
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    <!-- InstanceEndEditable --></tr>
  <tr> 
    <td align="left"> <div align="left"></div></td>
  </tr>
  <tr> 
    <td align="left">&nbsp;</td>
  </tr>
</table>
<blockquote> 
  <p name="Map"> 
    <map name="Map">
      <area shape="rect" coords="4,4,41,29" href="http://jmusic.ci.qut.edu" target="_blank" alt="jMusic">
      <area shape="rect" coords="43,5,80,31" href="http://www.ozco.gov.au" target="_blank" alt="Australia Council">
      <area shape="rect" coords="83,4,108,29" href="http://www.qut.com" target="_blank" alt="Queensland University of Technology">
    </map>
    <map name="Map2">
      <area shape="rect" coords="702,1,758,12" href="../../extras/sitemap.html" target="_self" alt="Sitemap">
      <area shape="rect" coords="629,1,687,12" href="../../extras/contact.html" target="_self" alt="Contact">
      <area shape="rect" coords="574,1,615,14" href="../../index.html" target="_self" alt="Home">
    </map>
    <map name="Map3">
      <area shape="rect" coords="553,5,601,18" href="#" alt="Home">
      <area shape="rect" coords="612,4,671,18" href="#">
      <area shape="rect" coords="683,3,735,19" href="#">
      <area shape="rect" coords="9,8,227,59" href="#" target="index.html">
    </map>
    <map name="Map4">
      <area shape="rect" coords="6,9,40,41" href="http://www.qut.com" target="_blank" alt="http://www.qut.com">
      <area shape="rect" coords="44,14,87,42" href="http://explodingart.com/jmusic" target="_blank" alt="http://explodingart.com/jmusic">
      <area shape="rect" coords="90,9,138,43" href="http://www.ozco.gov.au" target="_parent" alt="http://www.ozco.gov.au">
      <area shape="rect" coords="313,13,512,36" href="../../contact.html">
    </map>
  </p>
</blockquote>
<map name="Map5">
  <area shape="rect" coords="-7,4,228,51" href="../../index.htm" target="_self" alt="Digital Instrument making">
  <area shape="rect" coords="599,1,658,18" href="../../index.htm" alt="Home">
  <area shape="rect" coords="677,3,755,18" href="../../extras/contact.htm" target="extras">
</map>
</body>
<!-- InstanceEnd --></html>
